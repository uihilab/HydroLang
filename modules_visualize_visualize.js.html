<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>modules/visualize/visualize.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AORCDataSource.html">AORCDataSource</a><ul class='methods'><li data-type='method'><a href="AORCDataSource.html#calculateIndices">calculateIndices</a></li><li data-type='method'><a href="AORCDataSource.html#extractGridData">extractGridData</a></li><li data-type='method'><a href="AORCDataSource.html#extractPointData">extractPointData</a></li><li data-type='method'><a href="AORCDataSource.html#fetchAndDecompressChunk">fetchAndDecompressChunk</a></li><li data-type='method'><a href="AORCDataSource.html#fetchMetadata">fetchMetadata</a></li><li data-type='method'><a href="AORCDataSource.html#getDatasetInfo">getDatasetInfo</a></li><li data-type='method'><a href="AORCDataSource.html#loadDatasource">loadDatasource</a></li></ul></li><li><a href="data.html">data</a><ul class='methods'><li data-type='method'><a href="data.html#.download">download</a></li><li data-type='method'><a href="data.html#.generateDateString">generateDateString</a></li><li data-type='method'><a href="data.html#.lowercasing">lowercasing</a></li><li data-type='method'><a href="data.html#.recursiveSearch">recursiveSearch</a></li><li data-type='method'><a href="data.html#.retrieve">retrieve</a></li><li data-type='method'><a href="data.html#.transform">transform</a></li><li data-type='method'><a href="data.html#.transformAORCData">transformAORCData</a></li><li data-type='method'><a href="data.html#.upload">upload</a></li><li data-type='method'><a href="data.html#.xml2json">xml2json</a></li></ul></li><li><a href="DEPDataSource.html">DEPDataSource</a><ul class='methods'><li data-type='method'><a href="DEPDataSource.html#calculateSize">calculateSize</a></li><li data-type='method'><a href="DEPDataSource.html#fetchDEMData">fetchDEMData</a></li><li data-type='method'><a href="DEPDataSource.html#fetchPointElevation">fetchPointElevation</a></li><li data-type='method'><a href="DEPDataSource.html#generateGeoTiffUrl">generateGeoTiffUrl</a></li><li data-type='method'><a href="DEPDataSource.html#getDatasetInfo">getDatasetInfo</a></li></ul></li><li><a href="divisors.html">divisors</a><ul class='methods'><li data-type='method'><a href="divisors.html#.createDiv">createDiv</a></li><li data-type='method'><a href="divisors.html#.createScript">createScript</a></li><li data-type='method'><a href="divisors.html#.isdivAdded">isdivAdded</a></li><li data-type='method'><a href="divisors.html#.isScriptAdded">isScriptAdded</a></li></ul></li><li><a href="ECMWFDataSource.html">ECMWFDataSource</a><ul class='methods'><li data-type='method'><a href="ECMWFDataSource.html#extractGridData">extractGridData</a></li><li data-type='method'><a href="ECMWFDataSource.html#extractPointData">extractPointData</a></li><li data-type='method'><a href="ECMWFDataSource.html#extractRawGRIB2">extractRawGRIB2</a></li><li data-type='method'><a href="ECMWFDataSource.html#fetch">fetch</a></li><li data-type='method'><a href="ECMWFDataSource.html#processGRIB2File">processGRIB2File</a></li></ul></li><li><a href="floodDM.html">floodDM</a><ul class='methods'><li data-type='method'><a href="floodDM.html#.buildPropertyDMScenario">buildPropertyDMScenario</a></li><li data-type='method'><a href="floodDM.html#.createTableFromObject">createTableFromObject</a></li><li data-type='method'><a href="floodDM.html#.getBridgeDamage">getBridgeDamage</a></li><li data-type='method'><a href="floodDM.html#.getCityFloodDamage">getCityFloodDamage</a></li><li data-type='method'><a href="floodDM.html#.getFloodInundation">getFloodInundation</a></li><li data-type='method'><a href="floodDM.html#.getLifeLoss">getLifeLoss</a></li><li data-type='method'><a href="floodDM.html#.getPropertyLoss">getPropertyLoss</a></li><li data-type='method'><a href="floodDM.html#.getUtilityDamage">getUtilityDamage</a></li><li data-type='method'><a href="floodDM.html#.getVehicleDamage">getVehicleDamage</a></li><li data-type='method'><a href="floodDM.html#initDamageScenario">initDamageScenario</a></li><li data-type='method'><a href="floodDM.html#initMitigationScenario">initMitigationScenario</a></li><li data-type='method'><a href="floodDM.html#runMitigationScenario">runMitigationScenario</a></li></ul></li><li><a href="geoprocessor.html">geoprocessor</a><ul class='methods'><li data-type='method'><a href="geoprocessor.html#.flowAccumulation">flowAccumulation</a></li><li data-type='method'><a href="geoprocessor.html#.flowDirection">flowDirection</a></li><li data-type='method'><a href="geoprocessor.html#.roughness">roughness</a></li><li data-type='method'><a href="geoprocessor.html#.tpi">tpi</a></li><li data-type='method'><a href="geoprocessor.html#.tri">tri</a></li><li data-type='method'><a href="geoprocessor.html#.watershed">watershed</a></li></ul></li><li><a href="GeoTIFFDataSource.html">GeoTIFFDataSource</a><ul class='methods'><li data-type='method'><a href="GeoTIFFDataSource.html#extractFromZip">extractFromZip</a></li><li data-type='method'><a href="GeoTIFFDataSource.html#getGeoTIFFGrid">getGeoTIFFGrid</a></li><li data-type='method'><a href="GeoTIFFDataSource.html#getGeoTIFFValueAtPoint">getGeoTIFFValueAtPoint</a></li><li data-type='method'><a href="GeoTIFFDataSource.html#parseGeoTIFF">parseGeoTIFF</a></li></ul></li><li><a href="GRIB2DataSource.html">GRIB2DataSource</a><ul class='methods'><li data-type='method'><a href="GRIB2DataSource.html#findGRIB2Message">findGRIB2Message</a></li><li data-type='method'><a href="GRIB2DataSource.html#getGRIB2Grid">getGRIB2Grid</a></li><li data-type='method'><a href="GRIB2DataSource.html#getGRIB2ValueAtPoint">getGRIB2ValueAtPoint</a></li><li data-type='method'><a href="GRIB2DataSource.html#parseGRIB2">parseGRIB2</a></li></ul></li><li><a href="GRIB2Integration.html">GRIB2Integration</a><ul class='methods'><li data-type='method'><a href="GRIB2Integration.html#applySpatialSubsetting">applySpatialSubsetting</a></li><li data-type='method'><a href="GRIB2Integration.html#extractGRIB2Data">extractGRIB2Data</a></li><li data-type='method'><a href="GRIB2Integration.html#parseGRIB2Buffer">parseGRIB2Buffer</a></li></ul></li><li><a href="GriddedDataSource.html">GriddedDataSource</a><ul class='methods'><li data-type='method'><a href="GriddedDataSource.html#aggregateSpatially">aggregateSpatially</a></li><li data-type='method'><a href="GriddedDataSource.html#aggregateTemporally">aggregateTemporally</a></li><li data-type='method'><a href="GriddedDataSource.html#applyScaling">applyScaling</a></li><li data-type='method'><a href="GriddedDataSource.html#buildURL">buildURL</a></li><li data-type='method'><a href="GriddedDataSource.html#decompress">decompress</a></li><li data-type='method'><a href="GriddedDataSource.html#extractGridTimeSeries">extractGridTimeSeries</a></li><li data-type='method'><a href="GriddedDataSource.html#extractMultiplePoints">extractMultiplePoints</a></li><li data-type='method'><a href="GriddedDataSource.html#extractPointData">extractPointData</a></li><li data-type='method'><a href="GriddedDataSource.html#extractTimeSeries">extractTimeSeries</a></li><li data-type='method'><a href="GriddedDataSource.html#fetch">fetch</a></li><li data-type='method'><a href="GriddedDataSource.html#fetchJSON">fetchJSON</a></li><li data-type='method'><a href="GriddedDataSource.html#findNearestIndex">findNearestIndex</a></li><li data-type='method'><a href="GriddedDataSource.html#formatTimestamp">formatTimestamp</a></li><li data-type='method'><a href="GriddedDataSource.html#handleError">handleError</a></li><li data-type='method'><a href="GriddedDataSource.html#loadLibrary">loadLibrary</a></li><li data-type='method'><a href="GriddedDataSource.html#toCSV">toCSV</a></li><li data-type='method'><a href="GriddedDataSource.html#toNetCDF">toNetCDF</a></li><li data-type='method'><a href="GriddedDataSource.html#validateCoordinates">validateCoordinates</a></li></ul></li><li><a href="HLclearCreek.html">HLclearCreek</a><ul class='methods'><li data-type='method'><a href="HLclearCreek.html#.additionalData">additionalData</a></li><li data-type='method'><a href="HLclearCreek.html#.dataStep">dataStep</a></li><li data-type='method'><a href="HLclearCreek.html#.get_time_step">get_time_step</a></li><li data-type='method'><a href="HLclearCreek.html#.get_value_at_indices">get_value_at_indices</a></li><li data-type='method'><a href="HLclearCreek.html#.retrieveData">retrieveData</a></li><li data-type='method'><a href="HLclearCreek.html#.retrieveGauge">retrieveGauge</a></li><li data-type='method'><a href="HLclearCreek.html#.spreadGauge">spreadGauge</a></li><li data-type='method'><a href="HLclearCreek.html#.spreadResults">spreadResults</a></li><li data-type='method'><a href="HLclearCreek.html#.update">update</a></li><li data-type='method'><a href="HLclearCreek.html#.update_until">update_until</a></li><li data-type='method'><a href="HLclearCreek.html#rainID">rainID</a></li></ul></li><li><a href="HRRRDataSource.html">HRRRDataSource</a><ul class='methods'><li data-type='method'><a href="HRRRDataSource.html#extractGridData">extractGridData</a></li><li data-type='method'><a href="HRRRDataSource.html#extractPointData">extractPointData</a></li><li data-type='method'><a href="HRRRDataSource.html#fetch">fetch</a></li><li data-type='method'><a href="HRRRDataSource.html#findProductForVariable">findProductForVariable</a></li><li data-type='method'><a href="HRRRDataSource.html#generateURL">generateURL</a></li><li data-type='method'><a href="HRRRDataSource.html#getDatasetInfo">getDatasetInfo</a></li><li data-type='method'><a href="HRRRDataSource.html#processFile">processFile</a></li></ul></li><li><a href="hydro.html">hydro</a><ul class='methods'><li data-type='method'><a href="hydro.html#.analyzeCollectionofEvents">analyzeCollectionofEvents</a></li><li data-type='method'><a href="hydro.html#.analyzeEvent">analyzeEvent</a></li><li data-type='method'><a href="hydro.html#.arithmetic">arithmetic</a></li><li data-type='method'><a href="hydro.html#.bucketmodel">bucketmodel</a></li><li data-type='method'><a href="hydro.html#.calculate_tds">calculate_tds</a></li><li data-type='method'><a href="hydro.html#.calculate_tss">calculate_tss</a></li><li data-type='method'><a href="hydro.html#.calculateDOSaturation">calculateDOSaturation</a></li><li data-type='method'><a href="hydro.html#.calculatepH">calculatepH</a></li><li data-type='method'><a href="hydro.html#.calculatePrecipitationMinMax">calculatePrecipitationMinMax</a></li><li data-type='method'><a href="hydro.html#.calibratePH">calibratePH</a></li><li data-type='method'><a href="hydro.html#.compensateORP">compensateORP</a></li><li data-type='method'><a href="hydro.html#.convertTemperature">convertTemperature</a></li><li data-type='method'><a href="hydro.html#.convertTurbidity">convertTurbidity</a></li><li data-type='method'><a href="hydro.html#.darcysLaw">darcysLaw</a></li><li data-type='method'><a href="hydro.html#.detectPrecipEvents">detectPrecipEvents</a></li><li data-type='method'><a href="hydro.html#.dimunithydro">dimunithydro</a></li><li data-type='method'><a href="hydro.html#.dissolvedOxygenDemand">dissolvedOxygenDemand</a></li><li data-type='method'><a href="hydro.html#.dynamicGround1D">dynamicGround1D</a></li><li data-type='method'><a href="hydro.html#.equationsystemsolver">equationsystemsolver</a></li><li data-type='method'><a href="hydro.html#.ETBlaneyCriddle">ETBlaneyCriddle</a></li><li data-type='method'><a href="hydro.html#.ETHargreaves">ETHargreaves</a></li><li data-type='method'><a href="hydro.html#.ETPenmanMontheith">ETPenmanMontheith</a></li><li data-type='method'><a href="hydro.html#.ETPriestelyTaylor">ETPriestelyTaylor</a></li><li data-type='method'><a href="hydro.html#.ETThornthwaite">ETThornthwaite</a></li><li data-type='method'><a href="hydro.html#.floodhydro">floodhydro</a></li><li data-type='method'><a href="hydro.html#.floodhydro">floodhydro</a></li><li data-type='method'><a href="hydro.html#.generateSyntheticValue">generateSyntheticValue</a></li><li data-type='method'><a href="hydro.html#.getJulianDay">getJulianDay</a></li><li data-type='method'><a href="hydro.html#.hyetogen">hyetogen</a></li><li data-type='method'><a href="hydro.html#.InfGreenAmpt">InfGreenAmpt</a></li><li data-type='method'><a href="hydro.html#.InfHorton">InfHorton</a></li><li data-type='method'><a href="hydro.html#.InfKostiakov">InfKostiakov</a></li><li data-type='method'><a href="hydro.html#.InfPhilip">InfPhilip</a></li><li data-type='method'><a href="hydro.html#.InfSmithParlange">InfSmithParlange</a></li><li data-type='method'><a href="hydro.html#.inverseDistanceWeighting">inverseDistanceWeighting</a></li><li data-type='method'><a href="hydro.html#.kinematicWaveRouting">kinematicWaveRouting</a></li><li data-type='method'><a href="hydro.html#.lagAndRoute">lagAndRoute</a></li><li data-type='method'><a href="hydro.html#.matrix">matrix</a></li><li data-type='method'><a href="hydro.html#.move">move</a></li><li data-type='method'><a href="hydro.html#.muskingumCunge">muskingumCunge</a></li><li data-type='method'><a href="hydro.html#.precipitationFrequencyAnalysis">precipitationFrequencyAnalysis</a></li><li data-type='method'><a href="hydro.html#.rainaggr">rainaggr</a></li><li data-type='method'><a href="hydro.html#.rainfallErosivityIndex">rainfallErosivityIndex</a></li><li data-type='method'><a href="hydro.html#.rainfallIntensityDurationFrequency">rainfallIntensityDurationFrequency</a></li><li data-type='method'><a href="hydro.html#.rainfallInterceptionModel">rainfallInterceptionModel</a></li><li data-type='method'><a href="hydro.html#.rainfallThresholdAnalysis">rainfallThresholdAnalysis</a></li><li data-type='method'><a href="hydro.html#.stageDischarge">stageDischarge</a></li><li data-type='method'><a href="hydro.html#.staticGround1d">staticGround1d</a></li><li data-type='method'><a href="hydro.html#.stochasticRainfallGeneration">stochasticRainfallGeneration</a></li><li data-type='method'><a href="hydro.html#.syntheticalc">syntheticalc</a></li><li data-type='method'><a href="hydro.html#.thiessen">thiessen</a></li><li data-type='method'><a href="hydro.html#.timeAreaMethod">timeAreaMethod</a></li><li data-type='method'><a href="hydro.html#.totalprec">totalprec</a></li><li data-type='method'><a href="hydro.html#.unithydrocons">unithydrocons</a></li></ul></li><li><a href="HydroBMI.BMI.html">BMI</a></li><li><a href="HydroLangBMI.html">HydroLangBMI</a><ul class='methods'><li data-type='method'><a href="HydroLangBMI.html#.dataTypes">dataTypes</a></li><li data-type='method'><a href="HydroLangBMI.html#.finalize">finalize</a></li><li data-type='method'><a href="HydroLangBMI.html#.generateOutputs">generateOutputs</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_component_name">get_component_name</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_current_time">get_current_time</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_end_time">get_end_time</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_grid_edge_count">get_grid_edge_count</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_grid_edge_nodes">get_grid_edge_nodes</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_grid_face_count">get_grid_face_count</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_grid_face_nodes">get_grid_face_nodes</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_grid_face_nodes">get_grid_face_nodes</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_grid_node_count">get_grid_node_count</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_grid_nodes_per_face">get_grid_nodes_per_face</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_grid_origin">get_grid_origin</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_grid_shape">get_grid_shape</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_grid_size">get_grid_size</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_grid_size">get_grid_size</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_grid_spacing">get_grid_spacing</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_grid_type">get_grid_type</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_grid_x">get_grid_x</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_grid_y">get_grid_y</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_grid_z">get_grid_z</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_input_item_count">get_input_item_count</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_time_step">get_time_step</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_time_units">get_time_units</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_value_at_indices">get_value_at_indices</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_value_ptr">get_value_ptr</a></li><li data-type='method'><a href="HydroLangBMI.html#.get_var_type">get_var_type</a></li><li data-type='method'><a href="HydroLangBMI.html#.handleConfig">handleConfig</a></li><li data-type='method'><a href="HydroLangBMI.html#.initialize">initialize</a></li><li data-type='method'><a href="HydroLangBMI.html#.set_value">set_value</a></li><li data-type='method'><a href="HydroLangBMI.html#.set_value_at_indices">set_value_at_indices</a></li><li data-type='method'><a href="HydroLangBMI.html#.update">update</a></li><li data-type='method'><a href="HydroLangBMI.html#.update_until">update_until</a></li><li data-type='method'><a href="HydroLangBMI.html#.visualizer">visualizer</a></li></ul></li><li><a href="HydroLangCache.html">HydroLangCache</a></li><li><a href="HydroLangGRIB2Parser.html">HydroLangGRIB2Parser</a><ul class='methods'><li data-type='method'><a href="HydroLangGRIB2Parser.html#applyScanningMode">applyScanningMode</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#calculateGridBounds">calculateGridBounds</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#convertTo2DGrid">convertTo2DGrid</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#createGridMetadataResponse">createGridMetadataResponse</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#extractGRIBMetadataOnly">extractGRIBMetadataOnly</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#extractParsedData">extractParsedData</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#extractParsedData">extractParsedData</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#generateBasicCoordinates">generateBasicCoordinates</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#generateCoordinates">generateCoordinates</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#generateCoordinatesFromParsedData">generateCoordinatesFromParsedData</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#getFullGridBounds">getFullGridBounds</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#getFullGridBounds">getFullGridBounds</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#getParameterDescriptionFromData">getParameterDescriptionFromData</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#getParameterDescriptionFromData">getParameterDescriptionFromData</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#getParameterDescriptionFromParsedData">getParameterDescriptionFromParsedData</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#getParameterFromData">getParameterFromData</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#getParameterFromData">getParameterFromData</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#getParameterFromParsedData">getParameterFromParsedData</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#getParameterName">getParameterName</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#getParameterNameFromData">getParameterNameFromData</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#getParameterNameFromData">getParameterNameFromData</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#getParameterNameFromParsedData">getParameterNameFromParsedData</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#getUnitsFromData">getUnitsFromData</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#getUnitsFromData">getUnitsFromData</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#getUnitsFromParsedData">getUnitsFromParsedData</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#getVariableFromMessage">getVariableFromMessage</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#parseBuffer">parseBuffer</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#parseBuffer">parseBuffer</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#parseBufferStreaming">parseBufferStreaming</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#parseGRIBHeaders">parseGRIBHeaders</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#parseGridSection">parseGridSection</a></li><li data-type='method'><a href="HydroLangGRIB2Parser.html#parseProductSection">parseProductSection</a></li></ul></li><li><a href="map.html">map</a><ul class='methods'><li data-type='method'><a href="map.html#.addGeoRasterLayer">addGeoRasterLayer</a></li><li data-type='method'><a href="map.html#.addMarker">addMarker</a></li><li data-type='method'><a href="map.html#.addPopup">addPopup</a></li><li data-type='method'><a href="map.html#.draw">draw</a></li><li data-type='method'><a href="map.html#.generateColors">generateColors</a></li><li data-type='method'><a href="map.html#.geoJSON">geoJSON</a></li><li data-type='method'><a href="map.html#.kml">kml</a></li><li data-type='method'><a href="map.html#.Layers">Layers</a></li><li data-type='method'><a href="map.html#.loader">loader</a></li><li data-type='method'><a href="map.html#.markerStyles">markerStyles</a></li><li data-type='method'><a href="map.html#.renderMap">renderMap</a></li></ul></li><li><a href="ModelProxy.html">ModelProxy</a><ul class='methods'><li data-type='method'><a href="ModelProxy.html#.dispose">dispose</a></li><li data-type='method'><a href="ModelProxy.html#.predict">predict</a></li><li data-type='method'><a href="ModelProxy.html#.save">save</a></li><li data-type='method'><a href="ModelProxy.html#.train">train</a></li></ul></li><li><a href="MRMSDataSource.html">MRMSDataSource</a><ul class='methods'><li data-type='method'><a href="MRMSDataSource.html#extractGridData">extractGridData</a></li><li data-type='method'><a href="MRMSDataSource.html#extractPointData">extractPointData</a></li><li data-type='method'><a href="MRMSDataSource.html#fetch">fetch</a></li><li data-type='method'><a href="MRMSDataSource.html#findProductForVariable">findProductForVariable</a></li><li data-type='method'><a href="MRMSDataSource.html#generateURL">generateURL</a></li><li data-type='method'><a href="MRMSDataSource.html#getDatasetInfo">getDatasetInfo</a></li><li data-type='method'><a href="MRMSDataSource.html#inferVariableFromProduct">inferVariableFromProduct</a></li><li data-type='method'><a href="MRMSDataSource.html#loadDatasource">loadDatasource</a></li><li data-type='method'><a href="MRMSDataSource.html#processFile">processFile</a></li></ul></li><li><a href="NetCDFDataSource.html">NetCDFDataSource</a><ul class='methods'><li data-type='method'><a href="NetCDFDataSource.html#getNetCDFSlice">getNetCDFSlice</a></li><li data-type='method'><a href="NetCDFDataSource.html#getNetCDFValue">getNetCDFValue</a></li><li data-type='method'><a href="NetCDFDataSource.html#getNetCDFVariable">getNetCDFVariable</a></li><li data-type='method'><a href="NetCDFDataSource.html#openNetCDF">openNetCDF</a></li></ul></li><li><a href="NLDASDataSource.html">NLDASDataSource</a><ul class='methods'><li data-type='method'><a href="NLDASDataSource.html#extractDayData">extractDayData</a></li><li data-type='method'><a href="NLDASDataSource.html#extractGridData">extractGridData</a></li><li data-type='method'><a href="NLDASDataSource.html#extractPointData">extractPointData</a></li><li data-type='method'><a href="NLDASDataSource.html#extractRawNetCDF">extractRawNetCDF</a></li><li data-type='method'><a href="NLDASDataSource.html#generateFileURL">generateFileURL</a></li></ul></li><li><a href="nn.html">nn</a><ul class='methods'><li data-type='method'><a href="nn.html#.createModel">createModel</a></li><li data-type='method'><a href="nn.html#.loadModel">loadModel</a></li></ul></li><li><a href="nnUtils.html">nnUtils</a></li><li><a href="NWMDataSource.html">NWMDataSource</a><ul class='methods'><li data-type='method'><a href="NWMDataSource.html#buildFileURL">buildFileURL</a></li><li data-type='method'><a href="NWMDataSource.html#convertToTypedArray">convertToTypedArray</a></li><li data-type='method'><a href="NWMDataSource.html#extractData">extractData</a></li><li data-type='method'><a href="NWMDataSource.html#extractNetCDFData">extractNetCDFData</a></li><li data-type='method'><a href="NWMDataSource.html#extractZarrData">extractZarrData</a></li><li data-type='method'><a href="NWMDataSource.html#findCOMIDIndex">findCOMIDIndex</a></li><li data-type='method'><a href="NWMDataSource.html#getDatasetInfo">getDatasetInfo</a></li></ul></li><li><a href="PRISMDataSource.html">PRISMDataSource</a><ul class='methods'><li data-type='method'><a href="PRISMDataSource.html#determinePRISMParams">determinePRISMParams</a></li><li data-type='method'><a href="PRISMDataSource.html#extractGridData">extractGridData</a></li><li data-type='method'><a href="PRISMDataSource.html#extractPointData">extractPointData</a></li><li data-type='method'><a href="PRISMDataSource.html#fetchAndExtractPRISM">fetchAndExtractPRISM</a></li><li data-type='method'><a href="PRISMDataSource.html#generateFileURL">generateFileURL</a></li></ul></li><li><a href="stats.html">stats</a><ul class='methods'><li data-type='method'><a href="stats.html#.andersonDarling">andersonDarling</a></li><li data-type='method'><a href="stats.html#.anova">anova</a></li><li data-type='method'><a href="stats.html#.arrchange">arrchange</a></li><li data-type='method'><a href="stats.html#.autoCorrelation">autoCorrelation</a></li><li data-type='method'><a href="stats.html#.autocovarianceMatrix">autocovarianceMatrix</a></li><li data-type='method'><a href="stats.html#.basicstats">basicstats</a></li><li data-type='method'><a href="stats.html#.bernoulliDist">bernoulliDist</a></li><li data-type='method'><a href="stats.html#.betaDist">betaDist</a></li><li data-type='method'><a href="stats.html#.binomialCoefficient">binomialCoefficient</a></li><li data-type='method'><a href="stats.html#.binomialDist">binomialDist</a></li><li data-type='method'><a href="stats.html#.bootstrap">bootstrap</a></li><li data-type='method'><a href="stats.html#.breuschPaganTest">breuschPaganTest</a></li><li data-type='method'><a href="stats.html#.chisqCDF">chisqCDF</a></li><li data-type='method'><a href="stats.html#.cleaner">cleaner</a></li><li data-type='method'><a href="stats.html#.computeD">computeD</a></li><li data-type='method'><a href="stats.html#.copydata">copydata</a></li><li data-type='method'><a href="stats.html#.correlation">correlation</a></li><li data-type='method'><a href="stats.html#.datagaps">datagaps</a></li><li data-type='method'><a href="stats.html#.dateparser">dateparser</a></li><li data-type='method'><a href="stats.html#.differencing">differencing</a></li><li data-type='method'><a href="stats.html#.dotProduct">dotProduct</a></li><li data-type='method'><a href="stats.html#.efficiencies">efficiencies</a></li><li data-type='method'><a href="stats.html#.errorMetrics">errorMetrics</a></li><li data-type='method'><a href="stats.html#.exponentialDist">exponentialDist</a></li><li data-type='method'><a href="stats.html#.exponentialMovingAverage">exponentialMovingAverage</a></li><li data-type='method'><a href="stats.html#.fastfourier">fastfourier</a></li><li data-type='method'><a href="stats.html#.flatenise">flatenise</a></li><li data-type='method'><a href="stats.html#.forwardFill">forwardFill</a></li><li data-type='method'><a href="stats.html#.frequency">frequency</a></li><li data-type='method'><a href="stats.html#.fTest">fTest</a></li><li data-type='method'><a href="stats.html#.gammaCDFApprox">gammaCDFApprox</a></li><li data-type='method'><a href="stats.html#.gammaDist">gammaDist</a></li><li data-type='method'><a href="stats.html#.gapfiller">gapfiller</a></li><li data-type='method'><a href="stats.html#.gapremoval">gapremoval</a></li><li data-type='method'><a href="stats.html#.gaussianDist">gaussianDist</a></li><li data-type='method'><a href="stats.html#.generateRandomData">generateRandomData</a></li><li data-type='method'><a href="stats.html#.geometricDist">geometricDist</a></li><li data-type='method'><a href="stats.html#.getNextState">getNextState</a></li><li data-type='method'><a href="stats.html#.gevDistribution">gevDistribution</a></li><li data-type='method'><a href="stats.html#.gumbelDist">gumbelDist</a></li><li data-type='method'><a href="stats.html#.interoutliers">interoutliers</a></li><li data-type='method'><a href="stats.html#.itemfilter">itemfilter</a></li><li data-type='method'><a href="stats.html#.joinarray">joinarray</a></li><li data-type='method'><a href="stats.html#.KS_computePValue">KS_computePValue</a></li><li data-type='method'><a href="stats.html#.KS_rejectAtAlpha">KS_rejectAtAlpha</a></li><li data-type='method'><a href="stats.html#.kurtosis">kurtosis</a></li><li data-type='method'><a href="stats.html#.linearMovingAverage">linearMovingAverage</a></li><li data-type='method'><a href="stats.html#.lognormalDist">lognormalDist</a></li><li data-type='method'><a href="stats.html#.LogSeriesDistribution">LogSeriesDistribution</a></li><li data-type='method'><a href="stats.html#.mannWhitney">mannWhitney</a></li><li data-type='method'><a href="stats.html#.matrixInverse">matrixInverse</a></li><li data-type='method'><a href="stats.html#.max">max</a></li><li data-type='method'><a href="stats.html#.mean">mean</a></li><li data-type='method'><a href="stats.html#.median">median</a></li><li data-type='method'><a href="stats.html#.min">min</a></li><li data-type='method'><a href="stats.html#.MK">MK</a></li><li data-type='method'><a href="stats.html#.multinomialDistribution">multinomialDistribution</a></li><li data-type='method'><a href="stats.html#.multiplyMatrix">multiplyMatrix</a></li><li data-type='method'><a href="stats.html#.multiregression">multiregression</a></li><li data-type='method'><a href="stats.html#.normalcdf">normalcdf</a></li><li data-type='method'><a href="stats.html#.normalDistribution">normalDistribution</a></li><li data-type='method'><a href="stats.html#.normoutliers">normoutliers</a></li><li data-type='method'><a href="stats.html#.numerise">numerise</a></li><li data-type='method'><a href="stats.html#.onearray">onearray</a></li><li data-type='method'><a href="stats.html#.outremove">outremove</a></li><li data-type='method'><a href="stats.html#.partialAutoCorrelation">partialAutoCorrelation</a></li><li data-type='method'><a href="stats.html#.poissonProcess">poissonProcess</a></li><li data-type='method'><a href="stats.html#.push">push</a></li><li data-type='method'><a href="stats.html#.quantile">quantile</a></li><li data-type='method'><a href="stats.html#.randomWalk">randomWalk</a></li><li data-type='method'><a href="stats.html#.range">range</a></li><li data-type='method'><a href="stats.html#.regression">regression</a></li><li data-type='method'><a href="stats.html#.residualVariance">residualVariance</a></li><li data-type='method'><a href="stats.html#.returnPeriod">returnPeriod</a></li><li data-type='method'><a href="stats.html#.runMarkovChainMonteCarlo">runMarkovChainMonteCarlo</a></li><li data-type='method'><a href="stats.html#.runMonteCarlo">runMonteCarlo</a></li><li data-type='method'><a href="stats.html#.runSimulation">runSimulation</a></li><li data-type='method'><a href="stats.html#.runVegas">runVegas</a></li><li data-type='method'><a href="stats.html#.seasonalDecompose">seasonalDecompose</a></li><li data-type='method'><a href="stats.html#.shapiroWilk">shapiroWilk</a></li><li data-type='method'><a href="stats.html#.simpleMovingAverage">simpleMovingAverage</a></li><li data-type='method'><a href="stats.html#.skewness">skewness</a></li><li data-type='method'><a href="stats.html#.spiCompute">spiCompute</a></li><li data-type='method'><a href="stats.html#.standardize">standardize</a></li><li data-type='method'><a href="stats.html#.stddev">stddev</a></li><li data-type='method'><a href="stats.html#.sum">sum</a></li><li data-type='method'><a href="stats.html#.sumsqrd">sumsqrd</a></li><li data-type='method'><a href="stats.html#.timegaps">timegaps</a></li><li data-type='method'><a href="stats.html#.transposeMatrix">transposeMatrix</a></li><li data-type='method'><a href="stats.html#.tTest">tTest</a></li><li data-type='method'><a href="stats.html#.uniformDist">uniformDist</a></li><li data-type='method'><a href="stats.html#.unique">unique</a></li><li data-type='method'><a href="stats.html#.variance">variance</a></li><li data-type='method'><a href="stats.html#.weibullDist">weibullDist</a></li><li data-type='method'><a href="stats.html#.wilcoxonSignedRank">wilcoxonSignedRank</a></li></ul></li><li><a href="visualize.html">visualize</a><ul class='methods'><li data-type='method'><a href="visualize.html#.chart">chart</a></li><li data-type='method'><a href="visualize.html#.draw">draw</a></li><li data-type='method'><a href="visualize.html#.drawHtmlTable">drawHtmlTable</a></li><li data-type='method'><a href="visualize.html#.generateReport">generateReport</a></li><li data-type='method'><a href="visualize.html#.prettyPrint">prettyPrint</a></li><li data-type='method'><a href="visualize.html#.table">table</a></li></ul></li><li><a href="ZarrDataSource.html">ZarrDataSource</a><ul class='methods'><li data-type='method'><a href="ZarrDataSource.html#getZarrArrayData">getZarrArrayData</a></li><li data-type='method'><a href="ZarrDataSource.html#getZarrChunk">getZarrChunk</a></li><li data-type='method'><a href="ZarrDataSource.html#getZarrRegion">getZarrRegion</a></li><li data-type='method'><a href="ZarrDataSource.html#getZarrSlice">getZarrSlice</a></li><li data-type='method'><a href="ZarrDataSource.html#getZarrValue">getZarrValue</a></li><li data-type='method'><a href="ZarrDataSource.html#openZarrArray">openZarrArray</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-analyze.html">analyze</a><ul class='methods'><li data-type='method'><a href="module-analyze.html#loadFloodDM">loadFloodDM</a></li></ul></li><li><a href="module-mapsources.html">mapsources</a></li></ul><h3>Externals</h3><ul><li><a href="external-D3.html">D3</a></li><li><a href="external-GeospatialLoader.html">GeospatialLoader</a></li><li><a href="external-GoogleCharts.html">GoogleCharts</a></li><li><a href="external-googlemapsapi.html">googlemapsapi</a></li><li><a href="external-GriddedData.html">GriddedData</a></li><li><a href="external-HDF5Loader.html">HDF5Loader</a></li><li><a href="external-leafletosmapi.html">leafletosmapi</a></li><li><a href="external-NetCDFLoader.html">NetCDFLoader</a></li><li><a href="external-tensorflow.html">tensorflow</a></li><li><a href="external-tileprov.html">tileprov</a></li><li><a href="external-ZarritaLoader.html">ZarritaLoader</a></li></ul><h3>Namespaces</h3><ul><li><a href="data.cache.html">cache</a><ul class='methods'><li data-type='method'><a href="data.cache.html#.checkCache">checkCache</a></li><li data-type='method'><a href="data.cache.html#.clear">clear</a></li><li data-type='method'><a href="data.cache.html#.delete">delete</a></li><li data-type='method'><a href="data.cache.html#.getStats">getStats</a></li><li data-type='method'><a href="data.cache.html#.list">list</a></li></ul></li><li><a href="datasources.html">datasources</a><ul class='members'><li data-type='method'><a href="datasources.html#.AEMET">AEMET</a></li><li data-type='method'><a href="datasources.html#.AORC">AORC</a></li><li data-type='method'><a href="datasources.html#.BMKG">BMKG</a></li><li data-type='method'><a href="datasources.html#.CHIRPS">CHIRPS</a></li><li data-type='method'><a href="datasources.html#.ClearCreek">ClearCreek</a></li><li data-type='method'><a href="datasources.html#.CMA">CMA</a></li><li data-type='method'><a href="datasources.html#.CPTEC">CPTEC</a></li><li data-type='method'><a href="datasources.html#.3DEP">3DEP</a></li><li data-type='method'><a href="datasources.html#.DWD">DWD</a></li><li data-type='method'><a href="datasources.html#.EAUK">EAUK</a></li><li data-type='method'><a href="datasources.html#.ECMWF">ECMWF</a></li><li data-type='method'><a href="datasources.html#.EPA">EPA</a></li><li data-type='method'><a href="datasources.html#.FAO">FAO</a></li><li data-type='method'><a href="datasources.html#.FEMA">FEMA</a></li><li data-type='method'><a href="datasources.html#.flooddamage_dt">flooddamage_dt</a></li><li data-type='method'><a href="datasources.html#.FMI">FMI</a></li><li data-type='method'><a href="datasources.html#.HRRR">HRRR</a></li><li data-type='method'><a href="datasources.html#.HydroGeospatial">HydroGeospatial</a></li><li data-type='method'><a href="datasources.html#.IDEAM">IDEAM</a></li><li data-type='method'><a href="datasources.html#.IFIS">IFIS</a></li><li data-type='method'><a href="datasources.html#.IMD">IMD</a></li><li data-type='method'><a href="datasources.html#.ISRIC">ISRIC</a></li><li data-type='method'><a href="datasources.html#.JMA">JMA</a></li><li data-type='method'><a href="datasources.html#.KMA">KMA</a></li><li data-type='method'><a href="datasources.html#.KNMI">KNMI</a></li><li data-type='method'><a href="datasources.html#.MeteoFrance">MeteoFrance</a></li><li data-type='method'><a href="datasources.html#.MeteoIT">MeteoIT</a></li><li data-type='method'><a href="datasources.html#.MeteoSTAT">MeteoSTAT</a></li><li data-type='method'><a href="datasources.html#.MetNo">MetNo</a></li><li data-type='method'><a href="datasources.html#.mitigation_dt">mitigation_dt</a></li><li data-type='method'><a href="datasources.html#.MRMS">MRMS</a></li><li data-type='method'><a href="datasources.html#.NASAPOWER">NASAPOWER</a></li><li data-type='method'><a href="datasources.html#.NHDPlus">NHDPlus</a></li><li data-type='method'><a href="datasources.html#.NLDAS">NLDAS</a></li><li data-type='method'><a href="datasources.html#.NLDI">NLDI</a></li><li data-type='method'><a href="datasources.html#.NOAA">NOAA</a></li><li data-type='method'><a href="datasources.html#.NWM">NWM</a></li><li data-type='method'><a href="datasources.html#.NWPS">NWPS</a></li><li data-type='method'><a href="datasources.html#.NWS">NWS</a></li><li data-type='method'><a href="datasources.html#.OpenMeteo">OpenMeteo</a></li><li data-type='method'><a href="datasources.html#.PRISM">PRISM</a></li><li data-type='method'><a href="datasources.html#.ProxyServers">ProxyServers</a></li><li data-type='method'><a href="datasources.html#.SILO">SILO</a></li><li data-type='method'><a href="datasources.html#.SISSA">SISSA</a></li><li data-type='method'><a href="datasources.html#.SMHI">SMHI</a></li><li data-type='method'><a href="datasources.html#.SMN">SMN</a></li><li data-type='method'><a href="datasources.html#.soapEnv">soapEnv</a></li><li data-type='method'><a href="datasources.html#.TAMSAT">TAMSAT</a></li><li data-type='method'><a href="datasources.html#.TMD">TMD</a></li><li data-type='method'><a href="datasources.html#.USGS">USGS</a></li><li data-type='method'><a href="datasources.html#.USGS">USGS</a></li><li data-type='method'><a href="datasources.html#.WBD">WBD</a></li><li data-type='method'><a href="datasources.html#.Worldbank">Worldbank</a></li><li data-type='method'><a href="datasources.html#.WQP">WQP</a></li></ul></li><li><a href="datasources.CUAHSI.html">CUAHSI</a><ul class='members'><li data-type='method'><a href="datasources.CUAHSI.html#.hisCentral">hisCentral</a></li><li data-type='method'><a href="datasources.CUAHSI.html#.hydroShare">hydroShare</a></li><li data-type='method'><a href="datasources.CUAHSI.html#.waterOneFlow">waterOneFlow</a></li></ul></li><li><a href="HydroBMI.html">HydroBMI</a><ul class='members'><li data-type='method'><a href="HydroBMI.html#.BMIConfig">BMIConfig</a></li></ul></li><li><a href="HydroBMI.Hydro.html">Hydro</a></li><li><a href="Hydrolang.html">Hydrolang</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_dx">_dx</a></li><li><a href="global.html#_ensureLibraries">_ensureLibraries</a></li><li><a href="global.html#_ensureWorker">_ensureWorker</a></li><li><a href="global.html#_openFromArrayBuffer">_openFromArrayBuffer</a></li><li><a href="global.html#_openGDALSource">_openGDALSource</a></li><li><a href="global.html#_runWorker">_runWorker</a></li><li><a href="global.html#_toGeorasterObject">_toGeorasterObject</a></li><li><a href="global.html#_toGeoTIFF">_toGeoTIFF</a></li><li><a href="global.html#addCustomLegend">addCustomLegend</a></li><li><a href="global.html#aggregateSpatial">aggregateSpatial</a></li><li><a href="global.html#aggregateTemporal">aggregateTemporal</a></li><li><a href="global.html#aggregateTime">aggregateTime</a></li><li><a href="global.html#algebra">algebra</a></li><li><a href="global.html#applyDataScaling">applyDataScaling</a></li><li><a href="global.html#applyQualityControl">applyQualityControl</a></li><li><a href="global.html#applyScalingToValue">applyScalingToValue</a></li><li><a href="global.html#aspect">aspect</a></li><li><a href="global.html#bandMath">bandMath</a></li><li><a href="global.html#cacheAPI">cacheAPI</a></li><li><a href="global.html#cachedFetch">cachedFetch</a></li><li><a href="global.html#calculateStatistics">calculateStatistics</a></li><li><a href="global.html#clip">clip</a></li><li><a href="global.html#clipGeo">clipGeo</a></li><li><a href="global.html#constructNWMFileURL">constructNWMFileURL</a></li><li><a href="global.html#convertAORCToCSV">convertAORCToCSV</a></li><li><a href="global.html#convertAORCToNetCDF">convertAORCToNetCDF</a></li><li><a href="global.html#convertDataUnits">convertDataUnits</a></li><li><a href="global.html#convertGeoTIFFToGeoraster">convertGeoTIFFToGeoraster</a></li><li><a href="global.html#convertNWMToCSV">convertNWMToCSV</a></li><li><a href="global.html#convertToArray">convertToArray</a></li><li><a href="global.html#convertToCSV">convertToCSV</a></li><li><a href="global.html#convertToNetCDF">convertToNetCDF</a></li><li><a href="global.html#createGoogleMapsGeoRasterLayer">createGoogleMapsGeoRasterLayer</a></li><li><a href="global.html#createLeafletCanvasGeoRasterLayer">createLeafletCanvasGeoRasterLayer</a></li><li><a href="global.html#createLeafletGeoRasterLayer">createLeafletGeoRasterLayer</a></li><li><a href="global.html#createSegmentationModel">createSegmentationModel</a></li><li><a href="global.html#createSimpleGeoRasterOverlay">createSimpleGeoRasterOverlay</a></li><li><a href="global.html#createStore">createStore</a></li><li><a href="global.html#createTransformer">createTransformer</a></li><li><a href="global.html#createZarrStore">createZarrStore</a></li><li><a href="global.html#decompressGzip">decompressGzip</a></li><li><a href="global.html#detectFormat">detectFormat</a></li><li><a href="global.html#determinePRISMRegion">determinePRISMRegion</a></li><li><a href="global.html#downloadERA5File">downloadERA5File</a></li><li><a href="global.html#drawHtmlTable">drawHtmlTable</a></li><li><a href="global.html#execute">execute</a></li><li><a href="global.html#expandSpatialBounds">expandSpatialBounds</a></li><li><a href="global.html#extractERA5Data">extractERA5Data</a></li><li><a href="global.html#extractERA5GridData">extractERA5GridData</a></li><li><a href="global.html#extractERA5PointData">extractERA5PointData</a></li><li><a href="global.html#extractERA5TimeSeries">extractERA5TimeSeries</a></li><li><a href="global.html#extractGRIB2Data">extractGRIB2Data</a></li><li><a href="global.html#extractHRRRGridData">extractHRRRGridData</a></li><li><a href="global.html#extractHRRRPointData">extractHRRRPointData</a></li><li><a href="global.html#extractHRRRTimeSeries">extractHRRRTimeSeries</a></li><li><a href="global.html#extractMRMSGridData">extractMRMSGridData</a></li><li><a href="global.html#extractMRMSPointData">extractMRMSPointData</a></li><li><a href="global.html#extractMRMSTimeSeries">extractMRMSTimeSeries</a></li><li><a href="global.html#extractNLDASGridData">extractNLDASGridData</a></li><li><a href="global.html#extractNLDASMultiplePoints">extractNLDASMultiplePoints</a></li><li><a href="global.html#extractNLDASPointData">extractNLDASPointData</a></li><li><a href="global.html#extractNLDASRawNetCDF">extractNLDASRawNetCDF</a></li><li><a href="global.html#extractNWMData">extractNWMData</a></li><li><a href="global.html#extractPRISMGridData">extractPRISMGridData</a></li><li><a href="global.html#extractPRISMPointData">extractPRISMPointData</a></li><li><a href="global.html#extractPRISMTimeSeries">extractPRISMTimeSeries</a></li><li><a href="global.html#fetchDEMData">fetchDEMData</a></li><li><a href="global.html#fetchPointElevation">fetchPointElevation</a></li><li><a href="global.html#fillSinks">fillSinks</a></li><li><a href="global.html#flattenND">flattenND</a></li><li><a href="global.html#formatAORCOutput">formatAORCOutput</a></li><li><a href="global.html#formatData">formatData</a></li><li><a href="global.html#formatNWMOutput">formatNWMOutput</a></li><li><a href="global.html#formatPRISMTimePeriod">formatPRISMTimePeriod</a></li><li><a href="global.html#generateNWMDateRange">generateNWMDateRange</a></li><li><a href="global.html#generatePRISMFileURL">generatePRISMFileURL</a></li><li><a href="global.html#generateProcessedDataKey">generateProcessedDataKey</a></li><li><a href="global.html#generateSimpleCacheKey">generateSimpleCacheKey</a></li><li><a href="global.html#getArrayData">getArrayData</a></li><li><a href="global.html#getAvailableERA5Variables">getAvailableERA5Variables</a></li><li><a href="global.html#getAvailableHRRRVariables">getAvailableHRRRVariables</a></li><li><a href="global.html#getAvailableMRMSProducts">getAvailableMRMSProducts</a></li><li><a href="global.html#getAvailableNLDASVariables">getAvailableNLDASVariables</a></li><li><a href="global.html#getAvailablePRISMVariables">getAvailablePRISMVariables</a></li><li><a href="global.html#getChunk">getChunk</a></li><li><a href="global.html#getFile">getFile</a></li><li><a href="global.html#getGridDataLibrary">getGridDataLibrary</a></li><li><a href="global.html#getHRRRDatasetInfo">getHRRRDatasetInfo</a></li><li><a href="global.html#getInfo">getInfo</a></li><li><a href="global.html#getLeafletColorForElevation">getLeafletColorForElevation</a></li><li><a href="global.html#getMap">getMap</a></li><li><a href="global.html#getMRMSDatasetInfo">getMRMSDatasetInfo</a></li><li><a href="global.html#getNLDASDatasetInfo">getNLDASDatasetInfo</a></li><li><a href="global.html#getNWMTemporalInfo">getNWMTemporalInfo</a></li><li><a href="global.html#getPRISMDatasetInfo">getPRISMDatasetInfo</a></li><li><a href="global.html#getRecommendedPRISMResolution">getRecommendedPRISMResolution</a></li><li><a href="global.html#getRegion">getRegion</a></li><li><a href="global.html#goldfeldQuandtTest">goldfeldQuandtTest</a></li><li><a href="global.html#GRIDDED_SOURCES">GRIDDED_SOURCES</a></li><li><a href="global.html#gridToTensor">gridToTensor</a></li><li><a href="global.html#hillshade">hillshade</a></li><li><a href="global.html#imgToTensor">imgToTensor</a></li><li><a href="global.html#info">info</a></li><li><a href="global.html#isGridDataLibraryLoaded">isGridDataLibraryLoaded</a></li><li><a href="global.html#isLoaded">isLoaded</a></li><li><a href="global.html#isValidBoundingBox">isValidBoundingBox</a></li><li><a href="global.html#isValidCoordinate">isValidCoordinate</a></li><li><a href="global.html#load">load</a></li><li><a href="global.html#loadGeoRasterLayerPlugin">loadGeoRasterLayerPlugin</a></li><li><a href="global.html#loadGeoTIFFFromBuffer">loadGeoTIFFFromBuffer</a></li><li><a href="global.html#loadGridDataLibrary">loadGridDataLibrary</a></li><li><a href="global.html#mapPixels">mapPixels</a></li><li><a href="global.html#mask">mask</a></li><li><a href="global.html#modelRegistry">modelRegistry</a></li><li><a href="global.html#openArray">openArray</a></li><li><a href="global.html#parseGRIB2">parseGRIB2</a></li><li><a href="global.html#pca">pca</a></li><li><a href="global.html#pollECMWFStatus">pollECMWFStatus</a></li><li><a href="global.html#preprocess">preprocess</a></li><li><a href="global.html#preprocessData">preprocessData</a></li><li><a href="global.html#processAORCBulkExtraction">processAORCBulkExtraction</a></li><li><a href="global.html#processAORCDatasetInfo">processAORCDatasetInfo</a></li><li><a href="global.html#processAORCGridData">processAORCGridData</a></li><li><a href="global.html#processAORCPointData">processAORCPointData</a></li><li><a href="global.html#processAORCTimeSeriesData">processAORCTimeSeriesData</a></li><li><a href="global.html#processERA5GRIB2Data">processERA5GRIB2Data</a></li><li><a href="global.html#processFileInChunks">processFileInChunks</a></li><li><a href="global.html#processGriddedSource">processGriddedSource</a></li><li><a href="global.html#processNWMBulkExtraction">processNWMBulkExtraction</a></li><li><a href="global.html#readGRIB2Chunked">readGRIB2Chunked</a></li><li><a href="global.html#readNetCDFChunked">readNetCDFChunked</a></li><li><a href="global.html#recenter">recenter</a></li><li><a href="global.html#reproject">reproject</a></li><li><a href="global.html#saveFile">saveFile</a></li><li><a href="global.html#seriesToTensor">seriesToTensor</a></li><li><a href="global.html#slope">slope</a></li><li><a href="global.html#sourceType">sourceType</a></li><li><a href="global.html#streamExtract">streamExtract</a></li><li><a href="global.html#testMRMSUrlGeneration">testMRMSUrlGeneration</a></li><li><a href="global.html#tile">tile</a></li><li><a href="global.html#transformVariable">transformVariable</a></li><li><a href="global.html#validate3DEPParams">validate3DEPParams</a></li><li><a href="global.html#validateERA5Config">validateERA5Config</a></li><li><a href="global.html#validateHRRRConfig">validateHRRRConfig</a></li><li><a href="global.html#validateMRMSConfig">validateMRMSConfig</a></li><li><a href="global.html#validateNLDASConfig">validateNLDASConfig</a></li><li><a href="global.html#validatePRISMConfig">validatePRISMConfig</a></li><li><a href="global.html#validatePRISMVariable">validatePRISMVariable</a></li><li><a href="global.html#vectorize">vectorize</a></li><li><a href="global.html#whitesTest">whitesTest</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">modules/visualize/visualize.js</h1>
    
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import stats from "../analyze/components/stats.js";
import * as divisors from "./divisors.js";
import { googleCdn } from "../../external/googlecharts/googlecharts.js";

window.loaded = false;
var g = googleCdn();

/**
 * Module for visualization of charts and tables.
 * @class visualize
 */

/**
 * Creates interactive charts with Google Charts library for hydrological data visualization.
 * Supports multiple chart types including line, scatter, column, histogram, timeline, and more.
 * Handles large datasets with automatic pagination and provides extensive customization options.
 * 
 * @function chart
 * @memberof visualize
 * @param {Object} options - Configuration object for chart creation
 * @param {Object} options.params - Chart parameters and settings
 * @param {string} [options.params.chartType="line"] - Chart type: 'line', 'scatter', 'column', 'histogram', 'timeline', 'combo', 'area', 'pie', 'bar'
 * @param {string} [options.params.id="visualize"] - HTML element ID for chart container
 * @param {boolean} [options.params.partition=false] - Enable data pagination for large datasets
 * @param {number} [options.params.maxPoints=1000] - Maximum points per page when partition is enabled
 * @param {string[]|string} [options.params.names=[]] - Series names/labels (array or comma-separated string)
 * @param {Object} [options.params.options={}] - Google Charts options object
 * @param {Object} [options.args] - Additional arguments (currently unused)
 * @param {Array} options.data - Chart data in various supported formats
 * @returns {void} Creates and renders chart in specified container
 * 
 * @example
 * // Create a simple line chart for streamflow data
 * const timeData = [
 *   ['2023-01-01', '2023-01-02', '2023-01-03', '2023-01-04'],
 *   [100.5, 95.2, 110.8, 88.3]
 * ];
 * 
 * hydro.visualize.chart({
 *   params: {
 *     chartType: 'line',
 *     id: 'streamflow-chart',
 *     names: ['Streamflow (cfs)']
 *   },
 *   data: timeData
 * });
 * 
 * @example
 * // Create multi-series line chart with custom styling
 * const multiSeriesData = [
 *   ['2023-01-01', '2023-01-02', '2023-01-03', '2023-01-04'],
 *   [100.5, 95.2, 110.8, 88.3],  // Streamflow
 *   [2.1, 2.0, 2.3, 1.9],        // Stage height
 *   [0.2, 0.8, 0.0, 0.5]         // Precipitation
 * ];
 * 
 * hydro.visualize.chart({
 *   params: {
 *     chartType: 'line',
 *     id: 'multi-parameter-chart',
 *     names: ['Streamflow (cfs)', 'Stage Height (ft)', 'Precipitation (in)'],
 *     options: {
 *       title: 'Hydrological Parameters Over Time',
 *       width: 900,
 *       height: 500,
 *       vAxes: {
 *         0: { title: 'Flow &amp; Stage' },
 *         1: { title: 'Precipitation' }
 *       },
 *       series: {
 *         0: { color: '#1f77b4', lineWidth: 3 },
 *         1: { color: '#ff7f0e', lineWidth: 2 },
 *         2: { color: '#2ca02c', targetAxisIndex: 1, type: 'columns' }
 *       }
 *     }
 *   },
 *   data: multiSeriesData
 * });
 * 
 * @example
 * // Create scatter plot for correlation analysis
 * const correlationData = [
 *   [1.2, 2.1, 3.5, 4.1, 5.8],  // Flow values
 *   [0.8, 1.5, 2.2, 2.9, 3.6]   // Stage values
 * ];
 * 
 * hydro.visualize.chart({
 *   params: {
 *     chartType: 'scatter',
 *     id: 'flow-stage-correlation',
 *     names: ['Flow vs Stage'],
 *     options: {
 *       title: 'Flow-Stage Relationship',
 *       hAxis: { title: 'Streamflow (cfs)' },
 *       vAxis: { title: 'Stage Height (ft)' },
 *       pointSize: 8,
 *       trendlines: { 0: { type: 'linear', showR2: true } }
 *     }
 *   },
 *   data: correlationData
 * });
 * 
 * @example
 * // Create column chart for monthly precipitation
 * const monthlyPrecip = [
 *   ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
 *   [2.1, 1.8, 3.2, 4.5, 5.1, 3.8]
 * ];
 * 
 * hydro.visualize.chart({
 *   params: {
 *     chartType: 'column',
 *     id: 'monthly-precip',
 *     names: ['Precipitation (inches)'],
 *     options: {
 *       title: 'Monthly Precipitation',
 *       colors: ['#2E7DD7'],
 *       bar: { groupWidth: '80%' }
 *     }
 *   },
 *   data: monthlyPrecip
 * });
 * 
 * @example
 * // Large dataset with pagination
 * const largeDataset = generateLargeTimeSeriesData(); // Assume 5000+ points
 * 
 * hydro.visualize.chart({
 *   params: {
 *     chartType: 'line',
 *     id: 'large-dataset-chart',
 *     partition: true,
 *     maxPoints: 500,
 *     names: ['Continuous Streamflow Data'],
 *     options: {
 *       title: 'Long-term Streamflow Record',
 *       explorer: { actions: ['dragToZoom', 'rightClickToReset'] }
 *     }
 *   },
 *   data: largeDataset
 * });
 * 
 * @example
 * // Nested time series data format
 * const nestedTimeSeriesData = [
 *   [['Time', '2023-01-01', '2023-01-02', '2023-01-03'], ['Flow', 100, 95, 110]],
 *   [['Time', '2023-01-01', '2023-01-02', '2023-01-03'], ['Stage', 2.1, 2.0, 2.3]]
 * ];
 * 
 * hydro.visualize.chart({
 *   params: {
 *     chartType: 'line',
 *     id: 'nested-series-chart',
 *     names: ['Flow', 'Stage']
 *   },
 *   data: nestedTimeSeriesData
 * });
 */

function chart({ params, args, data } = {}) {
  if (!Array.isArray(data)) return;

  let {
    chartType = "line",
    returnEle,
    partition = false,
    maxPoints = 1000,
    names = [],
    id = "visualize",
    options = {}
  } = params || {};

  if (typeof names === "string") {
    names = names.split(",").map(s => s.trim());
  }
  if (!Array.isArray(names)) {
    names = [];
  }

  let resizer;
  let currentChunkIndex = 0;
  let chunks = [];

  // Clear any existing chart state for this ID
  if (window._chartObjects &amp;&amp; window._chartObjects[id]) {
    try {
      window._chartObjects[id].clearChart();
    } catch (e) {
      // Ignore clearChart errors
    }
    delete window._chartObjects[id];
  }

  function normalizeChartData(raw) {
    if (!Array.isArray(raw)) return [];

    // Check for deeply nested time series: [[["t", ...], ["v", ...]], ...]
    if (
      Array.isArray(raw[0]) &amp;&amp;
      Array.isArray(raw[0][0]) &amp;&amp;
      typeof raw[0][0][0] === "string"
    ) {
      const series = raw.map(entry => {
        const [timeArr, valArr] = entry;
        const x = timeArr.slice(1);
        const y = valArr.slice(1).map(Number);
        return x.map((t, i) => [t, y[i]]);
      });

      // Assume all series are aligned on same timestamps
      const timestamps = series[0].map(row => row[0]);
      const result = [timestamps];
      for (let s of series) {
        result.push(s.map(row => row[1]));
      }

      return result;
    }

    // Fallbacks for older formats
    if (raw.every(x => typeof x === "number")) {
      return [[...Array(raw.length).keys()], raw];
    }

    // Check if we have a simple List-of-Points format: [[x1, y1], [x2, y2], ...]
    if (
      raw.length > 2 &amp;&amp;
      Array.isArray(raw[0]) &amp;&amp;
      raw[0].length === 2 &amp;&amp;
      typeof raw[0][0] === "number" &amp;&amp;
      typeof raw[0][1] === "number"
    ) {
      // Convert Row-Major [[x,y]...] to Column-Major [[x...], [y...]]
      const x = raw.map(row => row[0]);
      const y = raw.map(row => row[1]);
      return [x, y];
    }

    // Check if we have a time series format: [["datetime", ...dates], ["value", ...values]]
    if (raw.length >= 2 &amp;&amp;
      Array.isArray(raw[0]) &amp;&amp; Array.isArray(raw[1]) &amp;&amp;
      typeof raw[0][0] === 'string' &amp;&amp; typeof raw[1][0] === 'string' &amp;&amp;
      raw[0].length > 1 &amp;&amp; raw[1].length > 1) {

      // Check if first row contains date-like strings
      const firstDataRow = raw[0];
      const isDateTime = firstDataRow[0].toLowerCase().includes('date') ||
        firstDataRow[0].toLowerCase().includes('time') ||
        (firstDataRow.length > 1 &amp;&amp; isDateString(firstDataRow[1]));

      if (isDateTime) {
        // Process as time series data
        const timeData = raw[0].slice(1); // Remove label, keep time values
        const result = [timeData]; // Time values as strings (Google Charts will parse them)

        // Process value series
        for (let i = 1; i &lt; raw.length; i++) {
          const values = raw[i].slice(1).map(Number);
          result.push(values);
        }

        return result;
      }
    }

    let series = [], baseLength = 0;
    for (let entry of raw) {
      if (!Array.isArray(entry)) continue;

      if (Array.isArray(entry[0]) &amp;&amp; typeof entry[0][0] === 'string') {
        let time = entry[0].slice(1);
        let values = entry[1].slice(1).map(Number);
        baseLength = Math.max(baseLength, time.length);
        series.push([time, values]);
      } else if (typeof entry[0] === 'string') {
        let values = entry.slice(1).map(Number);
        baseLength = Math.max(baseLength, values.length);
        series.push([null, values]);
      } else {
        baseLength = Math.max(baseLength, entry.length);
        series.push([null, entry.map(Number)]);
      }
    }

    let xBase = [...Array(baseLength).keys()];
    let result = [xBase];

    for (let [x, y] of series) {
      if (!x) x = xBase;
      x = x.concat(Array(baseLength - x.length).fill(null));
      y = y.concat(Array(baseLength - y.length).fill(null));
      result.push(y);
    }

    return result;
  }

  // Helper function to detect if a string is a date
  function isDateString(str) {
    if (typeof str !== 'string') return false;

    // Check for common date patterns
    const datePatterns = [
      /^\d{4}-\d{2}-\d{2}/, // YYYY-MM-DD
      /^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/, // ISO datetime
      /^\d{2}\/\d{2}\/\d{4}/, // MM/DD/YYYY
      /^\d{2}-\d{2}-\d{4}/, // MM-DD-YYYY
    ];

    return datePatterns.some(pattern => pattern.test(str)) || !isNaN(Date.parse(str));
  }

  function splitChunks(data, size) {
    const length = data[0].length;
    let result = [];
    size = Number(size); // Ensure size is a number

    for (let start = 0; start &lt; length; start += size) {
      result.push(data.map(arr => arr.slice(start, start + size)));
    }

    return result;
  }

  // Create a unique ID for the inner chart container
  const chartContainerId = id + '-inner';

  const normalized = params.bypassNormalization ? data : normalizeChartData(data);
  // Get or create container
  let container = document.getElementById(id);
  if (!container) {
    const div = document.createElement("div");
    div.id = id;
    document.body.appendChild(div);
    container = div;
  }

  // Clear container content and reset any navigation state
  container.innerHTML = '';
  container._navCreated = false;

  // Ensure container is positioned relatively so absolute children are positioned correctly
  container.style.position = 'relative';

  // Create inner container for the chart canvas
  const innerDiv = document.createElement('div');
  innerDiv.id = chartContainerId;
  innerDiv.style.width = '100%';
  innerDiv.style.height = '100%';
  container.appendChild(innerDiv);

  function drawChart(subData) {
    // Use the inner container for the chart
    let targetContainer = document.getElementById(chartContainerId);

    // Fallback to main container if inner not found (shouldn't happen if setup correctly)
    if (!targetContainer) {
      targetContainer = document.getElementById(id);
    }

    const dataMatrix = [];

    const headers = ['X', ...subData.slice(1).map((_, i) => names[i] || 'Series ' + (i + 1))];
    dataMatrix.push(headers);

    // Check if first column contains date strings
    const isTimeSeriesData = subData[0].length > 0 &amp;&amp;
      typeof subData[0][0] === 'string' &amp;&amp;
      isDateString(subData[0][0]);

    for (let i = 0; i &lt; subData[0].length; i++) {
      // Convert date strings to Date objects for proper time series rendering
      const xValue = isTimeSeriesData ? new Date(subData[0][i]) : subData[0][i];
      const row = [xValue];
      for (let j = 1; j &lt; subData.length; j++) {
        row.push(subData[j][i]);
      }
      dataMatrix.push(row);
    }

    const chartData = google.visualization.arrayToDataTable(dataMatrix);

    const chartClassMap = {
      line: 'LineChart',
      column: 'ColumnChart',
      scatter: 'ScatterChart',
      timeline: 'Timeline',
      combo: 'ComboChart',
      histogram: 'Histogram',
      area: 'AreaChart',
      pie: 'PieChart',
      bar: 'BarChart'
    };

    if (!window._chartObjects) window._chartObjects = {};

    // Clear existing chart if it exists to prevent memory leaks and artifacts
    if (window._chartObjects[id]) {
      try {
        window._chartObjects[id].clearChart();
      } catch (e) {
        console.warn('Error clearing previous chart:', e);
      }
    }

    // Create new chart on the INNER container
    window._chartObjects[id] = new google.visualization[chartClassMap[chartType]](targetContainer);

    const chart = window._chartObjects[id];

    chart.draw(chartData, options);

    if (!window._resizeHandlers) window._resizeHandlers = {};
    if (!window._resizeHandlers[id]) {
      window._resizeHandlers[id] = true;
      window.addEventListener("resize", () => {
        clearTimeout(resizer);
        resizer = setTimeout(() => chart.draw(chartData, options), 100);
      });
    }
  }
  function createButtons(container) {
    if (container._navCreated) return;

    const nav = document.createElement("div");
    Object.assign(nav.style, {
      position: "absolute",
      bottom: "20px",
      right: "20px",
      zIndex: "1000",
      backgroundColor: "rgba(255, 255, 255, 0.9)",
      padding: "6px 10px",
      borderRadius: "20px",
      display: "flex",
      gap: "10px",
      alignItems: "center",
      boxShadow: "0 4px 12px rgba(0,0,0,0.1)",
      backdropFilter: "blur(5px)",
      fontFamily: "system-ui, -apple-system, sans-serif",
      fontSize: "14px",
      cursor: "grab",
      userSelect: "none",
      transition: "box-shadow 0.2s ease"
    });

    // Drag functionality
    let isDragging = false;
    let currentX;
    let currentY;
    let initialX;
    let initialY;
    let xOffset = 0;
    let yOffset = 0;

    nav.addEventListener("mousedown", dragStart);
    document.addEventListener("mousemove", drag);
    document.addEventListener("mouseup", dragEnd);

    function dragStart(e) {
      if (e.target.tagName === "BUTTON") return; // Don't drag when clicking buttons
      initialX = e.clientX - xOffset;
      initialY = e.clientY - yOffset;
      if (e.target === nav || nav.contains(e.target)) {
        isDragging = true;
        nav.style.cursor = "grabbing";
        nav.style.boxShadow = "0 8px 24px rgba(0,0,0,0.15)";
      }
    }

    function drag(e) {
      if (isDragging) {
        e.preventDefault();
        currentX = e.clientX - initialX;
        currentY = e.clientY - initialY;
        xOffset = currentX;
        yOffset = currentY;
        setTranslate(currentX, currentY, nav);
      }
    }

    function setTranslate(xPos, yPos, el) {
      el.style.transform = `translate3d(${xPos}px, ${yPos}px, 0)`;
    }

    function dragEnd(e) {
      initialX = currentX;
      initialY = currentY;
      isDragging = false;
      nav.style.cursor = "grab";
      nav.style.boxShadow = "0 4px 12px rgba(0,0,0,0.1)";
    }

    const createBtn = (icon, onClick) => {
      const btn = document.createElement("button");
      btn.innerHTML = icon;
      Object.assign(btn.style, {
        cursor: "pointer",
        width: "32px",
        height: "32px",
        border: "none",
        borderRadius: "50%",
        backgroundColor: "transparent",
        color: "#444",
        fontSize: "16px",
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
        transition: "all 0.2s ease",
        outline: "none"
      });

      btn.onmouseenter = () => {
        if (!btn.disabled) {
          btn.style.backgroundColor = "rgba(0,0,0,0.05)";
          btn.style.color = "#000";
        }
      };
      btn.onmouseleave = () => {
        if (!btn.disabled) {
          btn.style.backgroundColor = "transparent";
          btn.style.color = "#444";
        }
      };
      btn.onmousedown = (e) => e.stopPropagation(); // Prevent drag start

      btn.onclick = (e) => {
        e.stopPropagation();
        onClick();
      };
      return btn;
    };

    const prevBtn = createBtn("&amp;#10094;", () => {
      if (currentChunkIndex > 0) {
        currentChunkIndex--;
        drawChart(chunks[currentChunkIndex]);
        updateButtons();
      }
    });

    const nextBtn = createBtn("&amp;#10095;", () => {
      if (currentChunkIndex &lt; chunks.length - 1) {
        currentChunkIndex++;
        drawChart(chunks[currentChunkIndex]);
        updateButtons();
      }
    });

    const infoSpan = document.createElement("span");
    Object.assign(infoSpan.style, {
      margin: "0 4px",
      color: "#666",
      fontWeight: "500",
      minWidth: "40px",
      textAlign: "center",
      fontSize: "12px"
    });

    function updateButtons() {
      prevBtn.disabled = currentChunkIndex === 0;
      nextBtn.disabled = currentChunkIndex === chunks.length - 1;

      prevBtn.style.opacity = prevBtn.disabled ? "0.3" : "1";
      prevBtn.style.cursor = prevBtn.disabled ? "default" : "pointer";

      nextBtn.style.opacity = nextBtn.disabled ? "0.3" : "1";
      nextBtn.style.cursor = nextBtn.disabled ? "default" : "pointer";

      infoSpan.innerText = `${currentChunkIndex + 1} / ${chunks.length}`;
    }

    nav.appendChild(prevBtn);
    nav.appendChild(infoSpan);
    nav.appendChild(nextBtn);
    container.appendChild(nav);

    container._navCreated = true;
    updateButtons();
  }


  // Ensure maxPoints is a number
  maxPoints = Number(maxPoints);

  if (partition &amp;&amp; normalized[0].length > maxPoints) {
    chunks = splitChunks(normalized, maxPoints);
    currentChunkIndex = 0; // Reset to first chunk
    drawChart(chunks[currentChunkIndex]);
    createButtons(container);
  } else {
    drawChart(normalized);
  }
}

/**
 * Creates interactive data tables using Google Charts Table visualization.
 * Displays hydrological data in a structured, sortable, and filterable table format.
 * Supports various data types and provides extensive formatting options.
 * 
 * @function table
 * @memberof visualize
 * @param {Object} options - Configuration object for table creation
 * @param {Object} options.params - Table parameters and settings
 * @param {string} options.params.id - HTML element ID for table container
 * @param {string[]} options.params.datatype - Array of column data types: 'string', 'number', 'date', 'boolean'
 * @param {Object} [options.params.options] - Google Charts Table options for styling and behavior
 * @param {Object} [options.args] - Additional arguments (currently unused)
 * @param {Array} options.data - Table data as nested array [headers, row1, row2, ...]
 * @returns {void} Creates and renders table in specified container
 * 
 * @example
 * // Create a simple streamflow data table
 * const streamflowData = [
 *   [['Date', 'Streamflow (cfs)', 'Stage (ft)', 'Quality Code']],
 *   [
 *     ['2023-01-01', 125.5, 2.1, 'A'],
 *     ['2023-01-02', 118.3, 2.0, 'A'],
 *     ['2023-01-03', 132.7, 2.3, 'A'],
 *     ['2023-01-04', 109.2, 1.9, 'E']
 *   ]
 * ];
 * 
 * hydro.visualize.table({
 *   params: {
 *     id: 'streamflow-table',
 *     datatype: ['string', 'number', 'number', 'string'],
 *     options: {
 *       title: 'Daily Streamflow Data',
 *       width: '100%',
 *       height: 400,
 *       alternatingRowStyle: true,
 *       sortColumn: 0,
 *       sortAscending: false
 *     }
 *   },
 *   data: streamflowData
 * });
 * 
 * @example
 * // Create water quality parameters table with custom formatting
 * const waterQualityData = [
 *   [['Station ID', 'Temperature (C)', 'pH', 'Dissolved Oxygen (mg/L)', 'Turbidity (NTU)', 'Sample Date']],
 *   [
 *     ['USGS-01646500', 18.5, 7.2, 8.9, 12.3, new Date('2023-06-15')],
 *     ['USGS-01647000', 19.1, 7.4, 8.7, 15.1, new Date('2023-06-15')],
 *     ['USGS-01648000', 17.8, 6.9, 9.2, 8.7, new Date('2023-06-15')]
 *   ]
 * ];
 * 
 * hydro.visualize.table({
 *   params: {
 *     id: 'water-quality-table',
 *     datatype: ['string', 'number', 'number', 'number', 'number', 'date'],
 *     options: {
 *       title: 'Water Quality Monitoring Results',
 *       width: '100%',
 *       height: 300,
 *       allowHtml: true,
 *       cssClassNames: {
 *         'oddTableRow': 'odd-row',
 *         'evenTableRow': 'even-row',
 *         'headerRow': 'header-row'
 *       },
 *       numberFormat: '#,##0.0'
 *     }
 *   },
 *   data: waterQualityData
 * });
 * 
 * @example
 * // Create flood damage assessment table
 * const floodDamageData = [
 *   [['Property ID', 'Address', 'Flood Depth (ft)', 'Damage Estimate ($)', 'Building Type', 'Mitigation Recommended']],
 *   [
 *     ['P001', '123 River St', 2.5, 45000, 'Residential', true],
 *     ['P002', '456 Flood Ave', 1.8, 28000, 'Residential', false],
 *     ['P003', '789 Water Blvd', 4.2, 125000, 'Commercial', true],
 *     ['P004', '321 Stream Dr', 0.5, 8500, 'Residential', false]
 *   ]
 * ];
 * 
 * hydro.visualize.table({
 *   params: {
 *     id: 'flood-damage-table',
 *     datatype: ['string', 'string', 'number', 'number', 'string', 'boolean'],
 *     options: {
 *       title: 'Flood Damage Assessment Results',
 *       width: '100%',
 *       height: 350,
 *       sortColumn: 3,
 *       sortAscending: false,
 *       pageSize: 10,
 *       pagingButtons: 'auto'
 *     }
 *   },
 *   data: floodDamageData
 * });
 * 
 * @example
 * // Create precipitation summary table with conditional formatting
 * const precipitationData = [
 *   [['Month', 'Precipitation (in)', 'Days with Rain', 'Max Daily (in)', 'Departure from Normal (in)']],
 *   [
 *     ['January', 2.1, 8, 0.8, -0.3],
 *     ['February', 1.8, 6, 0.6, -0.5],
 *     ['March', 4.2, 12, 1.5, +1.2],
 *     ['April', 3.8, 10, 1.2, +0.8],
 *     ['May', 5.1, 14, 2.1, +1.5],
 *     ['June', 3.6, 9, 1.8, -0.2]
 *   ]
 * ];
 * 
 * hydro.visualize.table({
 *   params: {
 *     id: 'precipitation-summary',
 *     datatype: ['string', 'number', 'number', 'number', 'number'],
 *     options: {
 *       title: 'Monthly Precipitation Summary',
 *       width: '100%',
 *       height: 300,
 *       allowHtml: true,
 *       alternatingRowStyle: true
 *     }
 *   },
 *   data: precipitationData
 * });
 */
function table({ params, args, data } = {}) {
  // Use the robust drawHtmlTable for rendering
  drawHtmlTable({ params, data });
}

/**
 * Unified drawing function with preset configurations for charts, tables, and JSON visualization.
 * Provides an easy-to-use interface for creating visualizations with sensible defaults and
 * extensive customization options. Automatically handles Google Charts library loading.
 * 
 * @function draw
 * @memberof visualize
 * @param {Object} options - Configuration object for visualization
 * @param {Object} [options.params={}] - Drawing parameters and settings
 * @param {string} options.params.type - Visualization type: 'chart', 'table', or 'json'
 * @param {string} [options.params.id] - HTML element ID (auto-generated if not provided)
 * @param {string} [options.params.name] - Display name/title for the visualization
 * @param {boolean} [options.params.returnEle=false] - Whether to return the DOM element
 * @param {boolean} [options.params.partition=false] - Enable data pagination for large datasets
 * @param {number} [options.params.maxPoints=1000] - Maximum points per page when partition enabled
 * @param {Object} [options.args={}] - Visualization-specific arguments
 * @param {string} [options.args.charttype="line"] - Chart type for chart visualizations
 * @param {string[]|string} [options.args.names] - Series names/labels
 * @param {string} [options.args.font="monospace"] - Font family for text elements
 * @param {Object} [options.args.vAxes] - Vertical axes configuration
 * @param {Object} [options.args.series] - Series-specific styling
 * @param {Array} [options.data=[]] - Data to visualize in supported format
 * @returns {void|Element} Creates visualization or returns DOM element if returnEle is true
 * 
 * @example
 * // Create a simple line chart with default styling
 * const timeSeriesData = [
 *   [0, 1, 2, 3, 4, 5],
 *   [100.5, 95.2, 110.8, 88.3, 102.1, 97.6]
 * ];
 * 
 * hydro.visualize.draw({
 *   params: {
 *     type: 'chart',
 *     name: 'Daily Streamflow'
 *   },
 *   args: {
 *     charttype: 'line',
 *     names: ['Streamflow (cfs)']
 *   },
 *   data: timeSeriesData
 * });
 * 
 * @example
 * // Create a multi-series chart with custom styling
 * const multiParameterData = [
 *   ['2023-01-01', '2023-01-02', '2023-01-03', '2023-01-04'],
 *   [125.5, 118.3, 132.7, 109.2],  // Streamflow
 *   [2.1, 2.0, 2.3, 1.9],          // Stage
 *   [0.0, 0.2, 0.8, 0.1]           // Precipitation
 * ];
 * 
 * hydro.visualize.draw({
 *   params: {
 *     type: 'chart',
 *     name: 'Hydrological Parameters',
 *     id: 'multi-param-chart'
 *   },
 *   args: {
 *     charttype: 'line',
 *     names: ['Streamflow (cfs)', 'Stage Height (ft)', 'Precipitation (in)'],
 *     font: 'Arial',
 *     backgroundColor: '#f8f9fa',
 *     titleColor: '#2c3e50',
 *     vAxes: {
 *       0: { 
 *         title: 'Flow &amp; Stage',
 *         titleTextStyle: { color: '#1f77b4' }
 *       },
 *       1: { 
 *         title: 'Precipitation',
 *         titleTextStyle: { color: '#2ca02c' }
 *       }
 *     },
 *     series: {
 *       0: { color: '#1f77b4', lineWidth: 3 },
 *       1: { color: '#ff7f0e', lineWidth: 2 },
 *       2: { color: '#2ca02c', targetAxisIndex: 1, type: 'columns' }
 *     }
 *   },
 *   data: multiParameterData
 * });
 * 
 * @example
 * // Create a column chart for monthly data
 * const monthlyData = [
 *   ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
 *   [2.1, 1.8, 3.2, 4.5, 5.1, 3.8]
 * ];
 * 
 * hydro.visualize.draw({
 *   params: {
 *     type: 'chart',
 *     name: 'Monthly Precipitation',
 *     id: 'monthly-precip'
 *   },
 *   args: {
 *     charttype: 'column',
 *     names: ['Precipitation (inches)'],
 *     backgroundColor: '#ffffff',
 *     chartAreaWidth: '80%',
 *     chartAreaHeight: '70%',
 *     barWidth: '80%'
 *   },
 *   data: monthlyData
 * });
 * 
 * @example
 * // Create a data table
 * const tableData = [
 *   [['Date', 'Flow (cfs)', 'Stage (ft)']],
 *   [
 *     ['2023-01-01', 125.5, 2.1],
 *     ['2023-01-02', 118.3, 2.0],
 *     ['2023-01-03', 132.7, 2.3]
 *   ]
 * ];
 * 
 * hydro.visualize.draw({
 *   params: {
 *     type: 'table',
 *     name: 'Streamflow Data',
 *     id: 'data-table'
 *   },
 *   data: tableData
 * });
 * 
 * @example
 * // Render JSON data for inspection
 * const jsonData = {
 *   station: {
 *     id: 'USGS-01646500',
 *     name: 'Potomac River at Washington, DC',
 *     coordinates: { lat: 38.9495, lon: -77.0458 },
 *     parameters: ['streamflow', 'stage', 'temperature']
 *   },
 *   data: {
 *     recent: [125.5, 118.3, 132.7],
 *     quality: ['A', 'A', 'A']
 *   }
 * };
 * 
 * hydro.visualize.draw({
 *   params: {
 *     type: 'json',
 *     name: 'Station Metadata',
 *     id: 'station-info'
 *   },
 *   data: jsonData
 * });
 * 
 * @example
 * // Large dataset with pagination
 * const largeTimeSeries = generateLargeDataset(5000); // Assume 5000 data points
 * 
 * hydro.visualize.draw({
 *   params: {
 *     type: 'chart',
 *     name: 'Long-term Streamflow Record',
 *     partition: true,
 *     maxPoints: 500
 *   },
 *   args: {
 *     charttype: 'line',
 *     names: ['Historical Streamflow'],
 *     chartAreaHeight: '80%'
 *   },
 *   data: largeTimeSeries
 * });
 */

function draw({ params = {}, args = {}, data = [] } = {}) {
  // Ensure Google Charts is loaded before proceeding
  if (!window.google || !window.google.charts) {
    console.warn('Google Charts not loaded, attempting to load...');
    google.charts.load("current", {
      packages: ["corechart", "table", "line", "timeline"],
      callback: () => {
        // Retry the draw after loading
        draw({ params, args, data });
      }
    });
    return;
  }

  if (!window.loaded) {
    google.charts.load("current", {
      packages: ["corechart", "table", "line", "timeline"],
    });
  }
  window.loaded = true;

  let {
    type,
    id = `chart-${Math.floor(Math.random() * 100)}-gen`,
    name,
    returnEle = false,
  } = params;
  name === undefined ? (name = id) : name;

  var dat = data,
    pm;
  if (type !== "json") {
    //change the input in case its just a 1d array
    if (Array.isArray(data) &amp;&amp; typeof data[0] === "number") {
      // Single array of numbers, convert to [x, y]
      const x = Array.from({ length: data.length }, (_, i) => i);
      data = [x, data];
    }
  }

  let container = document.getElementById(id)

  // Get container dimensions if provided
  const containerWidth = container?.offsetWidth || '100%';
  const containerHeight = container?.offsetHeight || '100%';


  //Chart drawing options.
  // Chart drawing options
  if (type === "chart") {
    let { charttype = "line", names } = args;

    // Support for Combo Chart if charttype is an array
    if (Array.isArray(charttype)) {
      // 1. Ensure container exists (Auto-create if missing)
      if (container) {
        // If container exists, clear it to ensure we are rendering a fresh single chart
        container.innerHTML = '';
        container.style.display = 'block';
      } else {
        container = document.createElement("div");
        container.id = id;
        container.style.display = 'block';
        document.body.appendChild(container);
      }

      // Ensure container has dimensions, otherwise chart may be 0px height
      container.style.width = args.width || '100%';
      container.style.height = args.height || '400px';

      // 2. Prepare Data for Combo Chart
      let mergedData = data;
      let bypassNorm = false;
      let comboNames = names;

      // Helper to join multiple datasets.
      // Returns { columns: [x, y1, y2...], names: [s1, s2...] }
      const joinDatasets = (datasets) => {
        if (!datasets || datasets.length &lt; 2) return { columns: [], names: [] };

        let xMap = new Map();
        let extractedNames = [];

        datasets.forEach((d, i) => {
          // Determine series name
          let seriesName = (names &amp;&amp; names[i]) ? names[i] : (d[0][1] || `Series ${i + 1}`);
          if (Array.isArray(seriesName)) seriesName = seriesName[0];
          extractedNames.push(seriesName);

          // Process rows
          for (let r = 1; r &lt; d.length; r++) {
            let row = d[r];
            let x = row[0];
            let y = row[1];
            let key = String(x);
            if (!xMap.has(key)) {
              xMap.set(key, { val: x, yObj: {} });
            }
            xMap.get(key).yObj[i] = y;
          }
        });

        let keys = Array.from(xMap.keys());
        // Sort based on value
        keys.sort((a, b) => {
          let va = xMap.get(a).val;
          let vb = xMap.get(b).val;
          if (va &lt; vb) return -1;
          if (va > vb) return 1;
          return 0;
        });

        // Construct Column-Major Arrays
        let xCol = [];
        let yCols = Array(datasets.length).fill().map(() => []);

        keys.forEach(k => {
          let item = xMap.get(k);
          xCol.push(item.val);
          for (let i = 0; i &lt; datasets.length; i++) {
            yCols[i].push(item.yObj[i] !== undefined ? item.yObj[i] : null);
          }
        });

        return {
          columns: [xCol, ...yCols],
          names: extractedNames
        };
      };

      if (Array.isArray(data) &amp;&amp; data.length === charttype.length &amp;&amp; Array.isArray(data[0]) &amp;&amp; Array.isArray(data[0][0])) {
        const res = joinDatasets(data);
        mergedData = res.columns;
        comboNames = res.names;
        bypassNorm = true;
      }

      // 3. Configure Combo Chart Options
      const seriesConfig = {};
      charttype.forEach((type, i) => {
        // Google Charts ComboChart uses 'bars' for column series, not 'column'
        let mappedType = type;
        if (type === 'column') mappedType = 'bars';

        seriesConfig[i] = { type: mappedType };
      });

      const finalSeries = { ...seriesConfig, ...(args.series || {}) };

      const comboArgs = {
        ...args,
        charttype: 'combo',
        series: finalSeries
      };

      const comboParams = {
        ...params,
        type: 'chart',
        id: id,
        name: name,
        names: comboNames,
        bypassNormalization: bypassNorm
      };

      draw({ params: comboParams, args: comboArgs, data: mergedData });
      return;
    }




    // Base options
    const baseOptions = {
      width: containerWidth,
      height: containerHeight,
      title: name,
      fontName: args.font || "monospace",
      chartArea: {
        width: args.chartAreaWidth || '85%',
        height: args.chartAreaHeight || '75%',
        left: args.chartAreaLeft || '15%',
        top: args.chartAreaTop || '15%',
        right: args.chartAreaRight || '5%',
        bottom: args.chartAreaBottom || '20%'
      },
      backgroundColor: args.backgroundColor || '#fff',
      titleTextStyle: {
        color: args.titleColor || '#333',
        fontSize: args.titleFontSize || 16,
        bold: args.titleBold !== false
      },
      legend: {
        position: args.legendPosition || 'bottom',
        textStyle: {
          color: args.legendTextColor || '#666',
          fontSize: args.legendFontSize || 12
        }
      }
    };

    // Chart type specific options
    const chartSpecificOptions = {
      line: {
        curveType: args.curveType || 'function',
        lineWidth: args.lineWidth || 2,
        pointSize: args.pointSize || 5,
        explorer: {
          actions: ['dragToZoom', 'rightClickToReset']
        },
        vAxes: args.vAxes || {},
        series: args.series || {}
      },
      column: {
        bar: { groupWidth: args.barWidth || '75%' },
        isStacked: args.stacked || false,
        vAxes: args.vAxes || {},
        series: args.series || {}
      },
      scatter: {
        pointShape: args.pointShape || 'circle',
        pointSize: args.pointSize || 5,
        trendlines: args.trendlines || {},
        vAxes: args.vAxes || {},
        series: args.series || {}
      },
      pie: {
        pieHole: args.donut ? 0.4 : 0,
        pieSliceText: 'percentage'
      },
      combo: {
        seriesType: args.seriesType || 'line',
        series: args.series || {},
        vAxes: args.vAxes || {}
      }
    };

    var pm = {
      chartType: charttype,
      id,
      name,
      options: {
        ...baseOptions,
        ...(chartSpecificOptions[charttype] || {})
      },
      names: names,
      partition: params.partition || false,
      maxPoints: params.maxPoints || 1000
    };

    // Use google.charts.setOnLoadCallback for better timing
    if (window.google &amp;&amp; window.google.charts) {
      google.charts.setOnLoadCallback(() => {
        try {
          chart({ params: pm, data: dat });
        } catch (error) {
          console.error('Error drawing chart:', error);
        }
      });
    } else {
      // Fallback to setTimeout if setOnLoadCallback is not available
      setTimeout(() => {
        try {
          chart({ params: pm, data: dat });
        } catch (error) {
          console.error('Error drawing chart:', error);
        }
      }, 300);
    }
    return;
  }

  //Table options
  else if (type === "table") {
    // var datatype = [];
    // //MOMENTARY CORRECTION
    // dat[0][1][0] = "Value";
    // datatype.push("string");
    // datatype.push("number");
    // //Customizable chart for two columns. Will be expanded to n columns.
    pm = {
      id: id,
      //datatype: datatype,
      options: {
        title: id,
        width: "100%",
        height: "80%",
      },
    };
    // setTimeout(() => table({ params: pm, data: dat }), 200);
    // return;
    drawHtmlTable({ params: pm, data: dat })
  }
  //JSON options.
  else if (type === "json") {
    return prettyPrint({ params: params, data: data });
  }
}

/**
 * Creates an interactive JSON viewer for exploring complex JavaScript objects and data structures.
 * Uses the renderjson library to provide collapsible, hierarchical display of JSON data with
 * syntax highlighting and navigation controls. Ideal for data inspection and debugging.
 * 
 * @function prettyPrint
 * @memberof visualize
 * @param {Object} options - Configuration object for JSON rendering
 * @param {Object} [options.params] - Rendering parameters and settings
 * @param {string} [options.params.id="jsonrender"] - HTML element ID for JSON container
 * @param {string} [options.params.title] - Title to display above the JSON viewer
 * @param {string} [options.params.input] - Input mode: 'all' to display localStorage items, or omit for data parameter
 * @param {string} [options.params.type="JSON"] - Data type (currently only JSON supported)
 * @param {Object} [options.args] - Additional arguments (currently unused)
 * @param {Object|Array} [options.data] - JavaScript object or array to render as JSON
 * @returns {void} Creates and displays interactive JSON viewer in specified container
 * 
 * @example
 * // Display API response data for inspection
 * const apiResponse = {
 *   station: {
 *     id: 'USGS-01646500',
 *     name: 'Potomac River at Washington, DC',
 *     coordinates: { latitude: 38.9495, longitude: -77.0458 },
 *     drainage_area: 11570.0,
 *     status: 'active'
 *   },
 *   timeSeries: [
 *     {
 *       variable: { code: '00060', name: 'Streamflow', unit: 'ft3/s' },
 *       values: [
 *         { dateTime: '2023-01-01T12:00:00Z', value: 2850, qualifiers: ['A'] },
 *         { dateTime: '2023-01-01T12:15:00Z', value: 2840, qualifiers: ['A'] }
 *       ]
 *     }
 *   ]
 * };
 * 
 * hydro.visualize.prettyPrint({
 *   params: {
 *     id: 'api-response-viewer',
 *     title: 'USGS API Response Data'
 *   },
 *   data: apiResponse
 * });
 * 
 * @example
 * // Display flood modeling results
 * const floodModelResults = {
 *   scenario: {
 *     return_period: '100-year',
 *     peak_discharge: 15000,
 *     flood_stage: 18.5,
 *     duration_hours: 72
 *   },
 *   affected_areas: [
 *     {
 *       name: 'Downtown District',
 *       area_sq_km: 2.3,
 *       max_depth_ft: 4.2,
 *       buildings_affected: 245,
 *       estimated_damage: 8500000
 *     },
 *     {
 *       name: 'Residential Zone A',
 *       area_sq_km: 5.1,
 *       max_depth_ft: 2.8,
 *       buildings_affected: 189,
 *       estimated_damage: 3200000
 *     }
 *   ],
 *   mitigation_measures: {
 *     levees: { effectiveness: 0.85, cost: 12000000 },
 *     flood_walls: { effectiveness: 0.75, cost: 8500000 },
 *     early_warning: { effectiveness: 0.60, cost: 500000 }
 *   }
 * };
 * 
 * hydro.visualize.prettyPrint({
 *   params: {
 *     id: 'flood-results-viewer',
 *     title: 'Flood Model Results - 100 Year Event'
 *   },
 *   data: floodModelResults
 * });
 * 
 * @example
 * // Display water quality monitoring metadata
 * const waterQualityMeta = {
 *   monitoring_program: {
 *     name: 'Chesapeake Bay Water Quality Monitoring',
 *     agency: 'EPA',
 *     start_date: '1985-01-01',
 *     frequency: 'monthly'
 *   },
 *   parameters: [
 *     { code: 'TEMP', name: 'Temperature', unit: 'degrees Celsius', precision: 0.1 },
 *     { code: 'DO', name: 'Dissolved Oxygen', unit: 'mg/L', precision: 0.01 },
 *     { code: 'PH', name: 'pH', unit: 'standard units', precision: 0.01 },
 *     { code: 'TURB', name: 'Turbidity', unit: 'NTU', precision: 0.1 }
 *   ],
 *   quality_codes: {
 *     'A': 'Approved for publication',
 *     'P': 'Provisional data',
 *     'E': 'Estimated',
 *     'R': 'Revised'
 *   },
 *   stations: {
 *     total: 156,
 *     active: 142,
 *     discontinued: 14
 *   }
 * };
 * 
 * hydro.visualize.prettyPrint({
 *   params: {
 *     id: 'wq-metadata-viewer',
 *     title: 'Water Quality Program Metadata'
 *   },
 *   data: waterQualityMeta
 * });
 * 
 * @example
 * // Display all objects stored in localStorage
 * hydro.visualize.prettyPrint({
 *   params: {
 *     input: 'all',
 *     id: 'localStorage-viewer',
 *     title: 'Stored Data Objects'
 *   }
 * });
 * 
 * @example
 * // Display complex nested analysis results
 * const analysisResults = {
 *   analysis_type: 'flow_duration_curve',
 *   station_info: {
 *     usgs_id: '01646500',
 *     period_of_record: { start: '1930-10-01', end: '2023-09-30' },
 *     years_of_data: 93
 *   },
 *   statistics: {
 *     percentiles: {
 *       p05: 8420, p10: 5280, p25: 2650, p50: 1580,
 *       p75: 980, p90: 640, p95: 480
 *     },
 *     annual_stats: {
 *       mean: 2180, median: 1580, std_dev: 3420,
 *       min: 112, max: 32600, skewness: 4.2
 *     }
 *   },
 *   data_quality: {
 *     percent_complete: 98.7,
 *     missing_days: 425,
 *     estimated_values: 1250,
 *     quality_flags: { good: 95.2, estimated: 3.8, poor: 1.0 }
 *   }
 * };
 * 
 * hydro.visualize.prettyPrint({
 *   params: {
 *     id: 'analysis-results-viewer',
 *     title: 'Flow Duration Analysis Results'
 *   },
 *   data: analysisResults
 * });
 */

/**
 * Renders a simple HTML table from 2D array data.
 */
function drawHtmlTable({ params, data } = {}) {
  const containerId = params.id || "visualize";
  const container = document.getElementById(containerId);

  if (!container || !Array.isArray(data) || data.length &lt; 1) {
    console.error("Invalid container or data structure for table.");
    return;
  }

  // Handle data = data[0] legacy bug: if strictly 1D array of arrays, it's fine.
  // But if passed as [ [[...]] ], unwrap it.
  if (data.length === 1 &amp;&amp; Array.isArray(data[0]) &amp;&amp; Array.isArray(data[0][0])) {
    data = data[0];
  }

  container.innerHTML = ""; // Clear previous content

  const style = document.createElement("style");
  style.textContent = `
    #${containerId} table {
      width: 100%;
      border-collapse: collapse;
      font-family: sans-serif;
      font-size: 14px;
      color: #333;
    }

    #${containerId} th,
    #${containerId} td {
      padding: 8px 12px;
      border: 1px solid #ddd;
    }

    #${containerId} th {
      text-align: left;
      font-weight: 600;
      background-color: #f4f4f4;
    }

    #${containerId} tr:nth-child(even) {
      background-color: #f9f9f9;
    }
    
    #${containerId} tr:hover {
      background-color: #f1f1f1;
    }
  `;
  // Only append style if not already processed for this ID (optional optimization, skipping for simplicity)
  container.appendChild(style);

  const table = document.createElement("table");

  // Headers (first row)
  const thead = document.createElement("thead");
  const headerRow = document.createElement("tr");
  if (data.length > 0) {
    data[0].forEach(cell => {
      const th = document.createElement("th");
      th.textContent = cell;
      headerRow.appendChild(th);
    });
  }
  thead.appendChild(headerRow);
  table.appendChild(thead);

  // Body
  const tbody = document.createElement("tbody");
  for (let i = 1; i &lt; data.length; i++) {
    const row = document.createElement("tr");
    data[i].forEach(cell => {
      const td = document.createElement("td");
      td.textContent = cell;
      row.appendChild(td);
    });
    tbody.appendChild(row);
  }
  table.appendChild(tbody);

  container.appendChild(table);
}

/**
 * Creates comprehensive HTML reports with interactive JSON exploration capabilities.
 * Generates structured reports with summary statistics, data previews, and export functionality.
 * Ideal for data analysis documentation and sharing results with stakeholders.
 * 
 * @function generateReport
 * @memberof visualize
 * @param {Object} options - Configuration object for report generation
 * @param {Object} [options.params] - Report parameters and settings
 * @param {string} [options.params.id="report-container"] - HTML element ID for report container
 * @param {string} [options.params.title] - Title for the report
 * @param {Object} [options.args] - Additional arguments (currently unused)
 * @param {Object|Array} options.data - Data object to include in the report
 * @returns {void} Creates and displays interactive report in specified container
 * 
 * @example
 * // Generate report for streamflow analysis results
 * const streamflowAnalysis = {
 *   metadata: {
 *     station_id: 'USGS-01646500',
 *     analysis_period: '2020-2023',
 *     record_length: '4 years',
 *     data_completeness: '99.2%'
 *   },
 *   statistics: {
 *     mean_flow: 2180.5,
 *     median_flow: 1820.0,
 *     max_flow: 18500.0,
 *     min_flow: 245.0,
 *     flow_percentiles: {
 *       p10: 680, p25: 1120, p75: 2890, p90: 4560
 *     }
 *   },
 *   seasonal_patterns: {
 *     spring_avg: 3450, summer_avg: 1820,
 *     fall_avg: 1680, winter_avg: 2280
 *   }
 * };
 * 
 * hydro.visualize.generateReport({
 *   params: {
 *     id: 'streamflow-report',
 *     title: 'Potomac River Streamflow Analysis Report'
 *   },
 *   data: streamflowAnalysis
 * });
 * 
 * @example
 * // Generate flood risk assessment report
 * const floodRiskData = {
 *   assessment_info: {
 *     study_area: 'Cedar Rapids, IA',
 *     flood_scenarios: ['10-yr', '25-yr', '50-yr', '100-yr', '500-yr'],
 *     assessment_date: '2023-08-15',
 *     methodology: 'HEC-RAS 2D modeling'
 *   },
 *   risk_summary: {
 *     total_structures: 2847,
 *     at_risk_100yr: 456,
 *     estimated_damages_100yr: 125000000,
 *     population_at_risk: 1230
 *   },
 *   mitigation_options: [
 *     { type: 'Levee System', cost: 45000000, benefit_cost_ratio: 2.8 },
 *     { type: 'Floodwall', cost: 28000000, benefit_cost_ratio: 2.1 },
 *     { type: 'Property Buyouts', cost: 15000000, benefit_cost_ratio: 3.2 }
 *   ]
 * };
 * 
 * hydro.visualize.generateReport({
 *   params: {
 *     id: 'flood-risk-report',
 *     title: 'Cedar Rapids Flood Risk Assessment'
 *   },
 *   data: floodRiskData
 * });
 */
function generateReport({ params, args, data } = {}) {
  const containerId = params.id || "report-container";
  let container = document.getElementById(containerId);

  if (!container) {
    const reportContent = document.querySelector('.report-content');
    if (reportContent) {
      container = document.createElement('div');
      container.id = containerId;
      container.className = 'report-container';
      reportContent.appendChild(container);
    } else {
      console.error('Report content area not found');
      return;
    }
  }

  container.innerHTML = '';

  const reportHeader = document.createElement('div');
  reportHeader.className = 'report-header';
  reportHeader.textContent = params.title || 'JSON Report';
  container.appendChild(reportHeader);

  const reportBody = document.createElement('div');
  reportBody.className = 'report-body';

  const summarySection = document.createElement('div');
  summarySection.className = 'report-section';
  summarySection.innerHTML = `
    &lt;h4>Summary&lt;/h4>
    &lt;p>Type: ${typeof data}&lt;/p>
    &lt;p>Keys: ${Object.keys(data).length}&lt;/p>
  `;
  reportBody.appendChild(summarySection);

  const previewSection = document.createElement('div');
  previewSection.className = 'report-section';
  previewSection.innerHTML = `
    &lt;h4>JSON Preview&lt;/h4>
    &lt;div class="json-preview">&lt;/div>
  `;
  const jsonPreview = previewSection.querySelector('.json-preview');
  reportBody.appendChild(previewSection);

  function renderJson(obj, parent, maxInitialKeys = 50, loadBatchSize = 50) {
    const ul = document.createElement('ul');
    ul.className = 'json-list';

    const entries = Object.entries(obj);
    let shownCount = 0;

    const renderChunk = (start, end) => {
      for (let i = start; i &lt; end &amp;&amp; i &lt; entries.length; i++) {
        const [key, value] = entries[i];
        const li = document.createElement('li');
        li.className = 'json-item';

        const keySpan = document.createElement('span');
        keySpan.className = 'json-key';
        keySpan.textContent = key + ': ';
        li.appendChild(keySpan);

        if (typeof value === 'object' &amp;&amp; value !== null) {
          const toggle = document.createElement('span');
          toggle.className = 'json-toggle';
          toggle.textContent = '[+]';
          let ulChild;

          toggle.addEventListener('click', () => {
            if (!ulChild) {
              ulChild = document.createElement('ul');
              ulChild.className = 'json-list';
              renderJson(value, ulChild, maxInitialKeys, loadBatchSize);
              li.appendChild(ulChild);
            }
            const isHidden = ulChild.style.display === 'none';
            ulChild.style.display = isHidden ? 'block' : 'none';
            toggle.textContent = isHidden ? '[-]' : '[+]';
          });

          li.appendChild(toggle);
        } else {
          const valueSpan = document.createElement('span');
          valueSpan.className = 'json-value';
          valueSpan.textContent = JSON.stringify(value);
          li.appendChild(valueSpan);
        }

        ul.appendChild(li);
      }
    };

    renderChunk(0, maxInitialKeys);
    shownCount = maxInitialKeys;

    const loadMoreBtn = document.createElement('button');
    loadMoreBtn.textContent = `Load more (${entries.length - shownCount} remaining)`;
    loadMoreBtn.className = 'json-load-more';
    loadMoreBtn.style.marginTop = '5px';
    loadMoreBtn.onclick = () => {
      renderChunk(shownCount, shownCount + loadBatchSize);
      shownCount += loadBatchSize;
      if (shownCount >= entries.length) {
        loadMoreBtn.remove();
      } else {
        loadMoreBtn.textContent = `Load more (${entries.length - shownCount} remaining)`;
        ul.appendChild(loadMoreBtn); // Append again at the end
      }
    };

    if (entries.length > maxInitialKeys) {
      ul.appendChild(loadMoreBtn);
    }

    parent.appendChild(ul);
  }

  const jsonContainer = document.createElement('div');
  jsonContainer.className = 'json-container';
  renderJson(data, jsonContainer);
  jsonPreview.appendChild(jsonContainer);

  const downloadSection = document.createElement('div');
  downloadSection.className = 'report-section';
  downloadSection.innerHTML = `
    &lt;h4>Export JSON&lt;/h4>
    &lt;button class="download-button">Download as JSON&lt;/button>
  `;
  const downloadButton = downloadSection.querySelector('.download-button');
  downloadButton.addEventListener('click', () => {
    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `${params.title || 'data'}.json`;
    a.click();
    URL.revokeObjectURL(url);
  });
  reportBody.appendChild(downloadSection);

  container.appendChild(reportBody);
}

/**
 * Creates clean, responsive HTML tables with built-in styling for displaying key-value pairs.
 * Generates lightweight tables without external dependencies, ideal for summary data display
 * and quick data presentation in reports or dashboards.
 * 
 * @function drawHtmlTable
 * @memberof visualize
 * @param {Object} options - Configuration object for HTML table creation
 * @param {Object} [options.params] - Table parameters and settings
 * @param {string} [options.params.id="visualize"] - HTML element ID for table container
 * @param {Array} options.data - Data array containing [labels, values] pairs
 * @returns {void} Creates and displays HTML table in specified container
 * 
 * @example
 * // Create station summary table
 * const stationSummary = [
 *   ['Station ID', 'Station Name', 'Latitude', 'Longitude', 'Drainage Area', 'Record Start'],
 *   ['USGS-01646500', 'Potomac River at Washington, DC', '38.9495N', '77.0458W', '11,570 sq mi', '1930-10-01']
 * ];
 * 
 * hydro.visualize.drawHtmlTable({
 *   params: { id: 'station-info-table' },
 *   data: stationSummary
 * });
 * 
 * @example
 * // Create current conditions table
 * const currentConditions = [
 *   ['Parameter', 'Current Reading', 'Date/Time', 'Quality', 'Units'],
 *   [
 *     'Streamflow', '2,450', '2023-08-15 14:30', 'Approved', 'ft/s',
 *     'Stage Height', '8.25', '2023-08-15 14:30', 'Approved', 'ft',
 *     'Water Temperature', '22.8', '2023-08-15 14:30', 'Provisional', 'C'
 *   ]
 * ];
 * 
 * hydro.visualize.drawHtmlTable({
 *   params: { id: 'current-conditions' },
 *   data: currentConditions
 * });
 * 
 * @example
 * // Create flood damage summary table
 * const floodSummary = [
 *   ['Flood Scenario', 'Peak Discharge', 'Affected Properties', 'Estimated Damage', 'Population at Risk'],
 *   [
 *     '25-year', '8,500 ft/s', '125', '$2.8M', '340',
 *     '100-year', '12,800 ft/s', '456', '$8.5M', '980', 
 *     '500-year', '18,200 ft/s', '1,250', '$25.2M', '2,400'
 *   ]
 * ];
 * 
 * hydro.visualize.drawHtmlTable({
 *   params: { id: 'flood-damage-summary' },
 *   data: floodSummary
 * });
 * 
 * @example
 * // Create water quality results table
 * const waterQualityResults = [
 *   ['Test Parameter', 'Result', 'EPA Standard', 'Status', 'Collection Date'],
 *   [
 *     'pH', '7.2', '6.5 - 8.5', 'Within Range', '2023-08-10',
 *     'Dissolved Oxygen', '8.9 mg/L', '>5.0 mg/L', 'Good', '2023-08-10',
 *     'Turbidity', '3.2 NTU', '&lt;4.0 NTU', 'Acceptable', '2023-08-10',
 *     'E. coli', '45 CFU/100mL', '&lt;126 CFU/100mL', 'Safe', '2023-08-10'
 *   ]
 * ];
 * 
 * hydro.visualize.drawHtmlTable({
 *   params: { id: 'water-quality-results' },
 *   data: waterQualityResults
 * });
 * 
 * @example
 * // Create simple key-value pairs table
 * const metadata = [
 *   ['Data Source', 'Analysis Period', 'Total Records', 'Missing Data', 'Quality Score'],
 *   ['USGS NWIS', '2020-2023', '1,461 days', '12 days (0.8%)', '99.2%']
 * ];
 * 
 * hydro.visualize.drawHtmlTable({
 *   params: { id: 'dataset-metadata' },
 *   data: metadata
 * });
 */

// Removed older drawHtmlTable implementation to avoid duplication/confusion


export { draw, generateReport };
export default { draw, generateReport };
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Mon Jan 12 2026 20:44:04 GMT+0000 (Coordinated Universal Time) using the Toast theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
